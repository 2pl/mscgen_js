/**
 * @license almond 0.3.2 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/*
 This file is part of mscgen_js.

 mscgen_js is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 mscgen_js is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with mscgen_js.  If not, see <http://www.gnu.org/licenses/>.
 */

/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="umd" include="memoize,cloneDeep,flatten,defaults" --development --output lib/lodash/lodash.custom.js`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

!function(){var t,e,r;!function(n){function i(t,e){return x.call(t,e)}function o(t,e){var r,n,i,o,a,c,s,u,l,d,p,f,h=e&&e.split("/"),g=y.map,b=g&&g["*"]||{};if(t){for(t=t.split("/"),a=t.length-1,y.nodeIdCompat&&C.test(t[a])&&(t[a]=t[a].replace(C,"")),"."===t[0].charAt(0)&&h&&(f=h.slice(0,h.length-1),t=f.concat(t)),l=0;l<t.length;l++)if(p=t[l],"."===p)t.splice(l,1),l-=1;else if(".."===p){if(0===l||1===l&&".."===t[2]||".."===t[l-1])continue;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}if((h||b)&&g){for(r=t.split("/"),l=r.length;l>0;l-=1){if(n=r.slice(0,l).join("/"),h)for(d=h.length;d>0;d-=1)if(i=g[h.slice(0,d).join("/")],i&&(i=i[n])){o=i,c=l;break}if(o)break;!s&&b&&b[n]&&(s=b[n],u=l)}!o&&s&&(o=s,c=u),o&&(r.splice(0,c,o),t=r.join("/"))}return t}function a(t,e){return function(){var r=w.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),f.apply(n,r.concat([t,e]))}}function c(t){return function(e){return o(e,t)}}function s(t){return function(e){b[t]=e}}function u(t){if(i(m,t)){var e=m[t];delete m[t],v[t]=!0,p.apply(n,e)}if(!i(b,t)&&!i(v,t))throw new Error("No "+t);return b[t]}function l(t){var e,r=t?t.indexOf("!"):-1;return r>-1&&(e=t.substring(0,r),t=t.substring(r+1,t.length)),[e,t]}function d(t){return function(){return y&&y.config&&y.config[t]||{}}}var p,f,h,g,b={},m={},y={},v={},x=Object.prototype.hasOwnProperty,w=[].slice,C=/\.js$/;h=function(t,e){var r,n=l(t),i=n[0];return t=n[1],i&&(i=o(i,e),r=u(i)),i?t=r&&r.normalize?r.normalize(t,c(e)):o(t,e):(t=o(t,e),n=l(t),i=n[0],t=n[1],i&&(r=u(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:r}},g={require:function(t){return a(t)},exports:function(t){var e=b[t];return"undefined"!=typeof e?e:b[t]={}},module:function(t){return{id:t,uri:"",exports:b[t],config:d(t)}}},p=function(t,e,r,o){var c,l,d,p,f,y,x=[],w=typeof r;if(o=o||t,"undefined"===w||"function"===w){for(e=!e.length&&r.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if(p=h(e[f],o),l=p.f,"require"===l)x[f]=g.require(t);else if("exports"===l)x[f]=g.exports(t),y=!0;else if("module"===l)c=x[f]=g.module(t);else if(i(b,l)||i(m,l)||i(v,l))x[f]=u(l);else{if(!p.p)throw new Error(t+" missing "+l);p.p.load(p.n,a(o,!0),s(l),{}),x[f]=b[l]}d=r?r.apply(b[t],x):void 0,t&&(c&&c.exports!==n&&c.exports!==b[t]?b[t]=c.exports:d===n&&y||(b[t]=d))}else t&&(b[t]=r)},t=e=f=function(t,e,r,i,o){if("string"==typeof t)return g[t]?g[t](e):u(h(t,e).f);if(!t.splice){if(y=t,y.deps&&f(y.deps,y.callback),!e)return;e.splice?(t=e,e=r,r=null):t=n}return e=e||function(){},"function"==typeof r&&(r=i,i=o),i?p(n,t,e,r):setTimeout(function(){p(n,t,e,r)},4),f},f.config=function(t){return f(t)},t._defined=b,r=function(t,e,r){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(r=e,e=[]),i(b,t)||i(m,t)||(m[t]=[t,e,r])},r.amd={jQuery:!0}}(),r("../node_modules/almond/almond",function(){}),r("lib/mscgenjs-core/parse/xuparser",[],function(){"use strict";function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function r(t){function r(){return o(io,no)}function n(e){throw c(e,null,t.substring(io,no),o(io,no))}function i(e){var r,n,i=oo[e];if(i)return i;for(r=e-1;!oo[r];)r--;for(i=oo[r],i={line:i.line,column:i.column,seenCR:i.seenCR};e>r;)n=t.charAt(r),"\n"===n?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),r++;return oo[e]=i,i}function o(t,e){var r=i(t),n=i(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function a(t){ao>no||(no>ao&&(ao=no,co=[]),co.push(t))}function c(t,r,n,i){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function a(t,e){function r(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}var n,i,o,a=new Array(t.length);for(o=0;o<t.length;o++)a[o]=t[o].description;return n=t.length>1?a.slice(0,-1).join(", ")+" or "+a[t.length-1]:a[0],i=e?'"'+r(e)+'"':"end of input","Expected "+n+" but "+i+" found."}return null!==r&&o(r),new e(null!==t?t:a(r,n),r,n,i)}function s(){var e,r,n,i,o,c,s,d,p,f;return e=no,r=$(),r!==wt?(n=u(),n!==wt?(i=$(),i!==wt?(123===t.charCodeAt(no)?(o=kt,no++):(o=wt,0===so&&a(At)),o!==wt?(c=$(),c!==wt?(s=l(),s!==wt?(d=$(),d!==wt?(125===t.charCodeAt(no)?(p=Et,no++):(p=wt,0===so&&a(Lt)),p!==wt?(f=$(),f!==wt?(io=e,r=St(r,s),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt),e}function u(){var e;return t.substr(no,3).toLowerCase()===It?(e=t.substr(no,3),no+=3):(e=wt,0===so&&a(jt)),e===wt&&(t.substr(no,2).toLowerCase()===Tt?(e=t.substr(no,2),no+=2):(e=wt,0===so&&a(Dt))),e}function l(){var t,e,r,n,i;return t=no,e=no,r=d(),r!==wt&&(io=e,r=Nt(r)),e=r,e===wt&&(e=null),e!==wt?(r=no,n=f(),n!==wt&&(io=r,n=Bt(n)),r=n,r===wt&&(r=null),r!==wt?(n=no,i=g(),i!==wt&&(io=n,i=Ot(i)),n=i,n===wt&&(n=null),n!==wt?(e=[e,r,n],t=e):(no=t,t=wt)):(no=t,t=wt)):(no=t,t=wt),t}function d(){var e,r,n,i,o,c;for(e=no,r=no,n=[],i=no,o=p(),o!==wt?(44===t.charCodeAt(no)?(c=Ht,no++):(c=wt,0===so&&a(Rt)),c!==wt?(io=i,o=Wt(o),i=o):(no=i,i=wt)):(no=i,i=wt);i!==wt;)n.push(i),i=no,o=p(),o!==wt?(44===t.charCodeAt(no)?(c=Ht,no++):(c=wt,0===so&&a(Rt)),c!==wt?(io=i,o=Wt(o),i=o):(no=i,i=wt)):(no=i,i=wt);return n!==wt?(i=no,o=p(),o!==wt?(59===t.charCodeAt(no)?(c=Ft,no++):(c=wt,0===so&&a(Mt)),c!==wt?(io=i,o=Wt(o),i=o):(no=i,i=wt)):(no=i,i=wt),i!==wt?(n=[n,i],r=n):(no=r,r=wt)):(no=r,r=wt),r!==wt&&(io=e,r=Gt(r)),e=r}function p(){var e,r,n,i,o,c,s,u;return so++,e=no,r=$(),r!==wt?(t.substr(no,6).toLowerCase()===zt?(n=t.substr(no,6),no+=6):(n=wt,0===so&&a(Ut)),n===wt&&(t.substr(no,11).toLowerCase()===Xt?(n=t.substr(no,11),no+=11):(n=wt,0===so&&a(Pt))),n!==wt?(i=$(),i!==wt?(61===t.charCodeAt(no)?(o=Vt,no++):(o=wt,0===so&&a($t)),o!==wt?(c=$(),c!==wt?(s=K(),s!==wt?(u=$(),u!==wt?(io=e,r=Kt(n,s),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt),e===wt&&(e=no,r=$(),r!==wt?(t.substr(no,5).toLowerCase()===Zt?(n=t.substr(no,5),no+=5):(n=wt,0===so&&a(Jt)),n!==wt?(i=$(),i!==wt?(61===t.charCodeAt(no)?(o=Vt,no++):(o=wt,0===so&&a($t)),o!==wt?(c=$(),c!==wt?(s=nt(),s!==wt?(u=$(),u!==wt?(io=e,r=Kt(n,s),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt),e===wt&&(e=no,r=$(),r!==wt?(t.substr(no,12).toLowerCase()===Qt?(n=t.substr(no,12),no+=12):(n=wt,0===so&&a(Yt)),n!==wt?(i=$(),i!==wt?(61===t.charCodeAt(no)?(o=Vt,no++):(o=wt,0===so&&a($t)),o!==wt?(c=$(),c!==wt?(s=tt(),s!==wt?(u=$(),u!==wt?(io=e,r=te(n,s),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt),e===wt&&(e=no,r=$(),r!==wt?(t.substr(no,9).toLowerCase()===ee?(n=t.substr(no,9),no+=9):(n=wt,0===so&&a(re)),n!==wt?(i=$(),i!==wt?(61===t.charCodeAt(no)?(o=Vt,no++):(o=wt,0===so&&a($t)),o!==wt?(c=$(),c!==wt?(s=B(),s!==wt?(u=$(),u!==wt?(io=e,r=Kt(n,s),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)))),so--,e===wt&&(r=wt,0===so&&a(qt)),e}function f(){var e,r,n,i,o,c;for(e=no,r=no,n=[],i=no,o=h(),o!==wt?(44===t.charCodeAt(no)?(c=Ht,no++):(c=wt,0===so&&a(Rt)),c!==wt?(io=i,o=ne(o),i=o):(no=i,i=wt)):(no=i,i=wt);i!==wt;)n.push(i),i=no,o=h(),o!==wt?(44===t.charCodeAt(no)?(c=Ht,no++):(c=wt,0===so&&a(Rt)),c!==wt?(io=i,o=ne(o),i=o):(no=i,i=wt)):(no=i,i=wt);return n!==wt?(i=no,o=h(),o!==wt?(59===t.charCodeAt(no)?(c=Ft,no++):(c=wt,0===so&&a(Mt)),c!==wt?(io=i,o=ne(o),i=o):(no=i,i=wt)):(no=i,i=wt),i!==wt?(n=[n,i],r=n):(no=r,r=wt)):(no=r,r=wt),r!==wt&&(io=e,r=ie(r)),e=r}function h(){var e,r,n,i,o,c,s,u;return so++,e=no,r=$(),r!==wt?(n=B(),n!==wt?(i=$(),i!==wt?(o=no,91===t.charCodeAt(no)?(c=ae,no++):(c=wt,0===so&&a(ce)),c!==wt?(s=T(),s!==wt?(93===t.charCodeAt(no)?(u=se,no++):(u=wt,0===so&&a(ue)),u!==wt?(io=o,c=le(n,s),o=c):(no=o,o=wt)):(no=o,o=wt)):(no=o,o=wt),o===wt&&(o=null),o!==wt?(c=$(),c!==wt?(io=e,r=de(n,o),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt),e===wt&&(e=no,r=$(),r!==wt?(n=R(),n!==wt?(i=$(),i!==wt?(o=no,91===t.charCodeAt(no)?(c=ae,no++):(c=wt,0===so&&a(ce)),c!==wt?(s=T(),s!==wt?(93===t.charCodeAt(no)?(u=se,no++):(u=wt,0===so&&a(ue)),u!==wt?(io=o,c=le(n,s),o=c):(no=o,o=wt)):(no=o,o=wt)):(no=o,o=wt),o===wt&&(o=null),o!==wt?(c=$(),c!==wt?(io=e,r=pe(n,o),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)),so--,e===wt&&(r=wt,0===so&&a(oe)),e}function g(){var e,r,n,i,o;if(e=[],r=no,n=b(),n!==wt?(i=$(),i!==wt?(59===t.charCodeAt(no)?(o=Ft,no++):(o=wt,0===so&&a(Mt)),o!==wt?(io=r,n=fe(n),r=n):(no=r,r=wt)):(no=r,r=wt)):(no=r,r=wt),r!==wt)for(;r!==wt;)e.push(r),r=no,n=b(),n!==wt?(i=$(),i!==wt?(59===t.charCodeAt(no)?(o=Ft,no++):(o=wt,0===so&&a(Mt)),o!==wt?(io=r,n=fe(n),r=n):(no=r,r=wt)):(no=r,r=wt)):(no=r,r=wt);else e=wt;return e}function b(){var e,r,n,i,o,c,s;for(e=no,r=no,n=[],i=no,o=m(),o!==wt?(c=$(),c!==wt?(44===t.charCodeAt(no)?(s=Ht,no++):(s=wt,0===so&&a(Rt)),s!==wt?(io=i,o=fe(o),i=o):(no=i,i=wt)):(no=i,i=wt)):(no=i,i=wt);i!==wt;)n.push(i),i=no,o=m(),o!==wt?(c=$(),c!==wt?(44===t.charCodeAt(no)?(s=Ht,no++):(s=wt,0===so&&a(Rt)),s!==wt?(io=i,o=fe(o),i=o):(no=i,i=wt)):(no=i,i=wt)):(no=i,i=wt);return n!==wt?(i=no,o=m(),o!==wt&&(io=i,o=he(o)),i=o,i!==wt?(n=[n,i],r=n):(no=r,r=wt)):(no=r,r=wt),r!==wt&&(io=e,r=ge(r)),e=r}function m(){var t;return t=y(),t===wt&&(t=C()),t}function y(){var e,r,n,i,o,c;return e=no,r=no,n=v(),n!==wt&&(io=r,n=fe(n)),r=n,r===wt&&(r=no,n=w(),n!==wt&&(io=r,n=fe(n)),r=n,r===wt&&(r=no,n=x(),n!==wt&&(io=r,n=fe(n)),r=n)),r!==wt?(n=no,91===t.charCodeAt(no)?(i=ae,no++):(i=wt,0===so&&a(ce)),i!==wt?(o=T(),o!==wt?(93===t.charCodeAt(no)?(c=se,no++):(c=wt,0===so&&a(ue)),c!==wt?(io=n,i=be(r,o),n=i):(no=n,n=wt)):(no=n,n=wt)):(no=n,n=wt),n===wt&&(n=null),n!==wt?(io=e,r=me(r,n),e=r):(no=e,e=wt)):(no=e,e=wt),e}function v(){var t,e,r,n;return t=no,e=$(),e!==wt?(r=_(),r!==wt?(n=$(),n!==wt?(io=t,e=ye(r),t=e):(no=t,t=wt)):(no=t,t=wt)):(no=t,t=wt),t}function x(){var t,e,r,n;return t=no,e=$(),e!==wt?(r=k(),r!==wt?(n=$(),n!==wt?(io=t,e=ye(r),t=e):(no=t,t=wt)):(no=t,t=wt)):(no=t,t=wt),t}function w(){var e,r,n,i,o,c,s,u;return e=no,r=$(),r!==wt?(n=H(),n!==wt?(i=$(),i!==wt?(o=A(),o!==wt?(c=$(),c!==wt?(s=H(),s!==wt?(u=$(),u!==wt?(io=e,r=ve(n,o,s),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt),e===wt&&(e=no,r=$(),r!==wt?(42===t.charCodeAt(no)?(n=xe,no++):(n=wt,0===so&&a(we)),n!==wt?(i=$(),i!==wt?(o=S(),o!==wt?(c=$(),c!==wt?(s=H(),s!==wt?(u=$(),u!==wt?(io=e,r=Ce(o,s),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt),e===wt&&(e=no,r=$(),r!==wt?(n=H(),n!==wt?(i=$(),i!==wt?(o=L(),o!==wt?(c=$(),c!==wt?(42===t.charCodeAt(no)?(s=xe,no++):(s=wt,0===so&&a(we)),s!==wt?(u=$(),u!==wt?(io=e,r=_e(n,o),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt),e===wt&&(e=no,r=$(),r!==wt?(n=H(),n!==wt?(i=$(),i!==wt?(o=E(),o!==wt?(c=$(),c!==wt?(42===t.charCodeAt(no)?(s=xe,no++):(s=wt,0===so&&a(we)),s!==wt?(u=$(),u!==wt?(io=e,r=_e(n,o),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)))),e}function C(){var e,r,n,i,o,c,s,u,l,d,p,f,h,b,m,y;return e=no,r=$(),r!==wt?(n=H(),n!==wt?(i=$(),i!==wt?(o=j(),o!==wt?(c=$(),c!==wt?(s=H(),s!==wt?(u=$(),u!==wt?(l=no,91===t.charCodeAt(no)?(d=ae,no++):(d=wt,0===so&&a(ce)),d!==wt?(p=T(),p!==wt?(93===t.charCodeAt(no)?(f=se,no++):(f=wt,0===so&&a(ue)),f!==wt?(io=l,d=ke(n,o,s,p),l=d):(no=l,l=wt)):(no=l,l=wt)):(no=l,l=wt),l===wt&&(l=null),l!==wt?(d=$(),d!==wt?(123===t.charCodeAt(no)?(p=kt,no++):(p=wt,0===so&&a(At)),p!==wt?(f=$(),f!==wt?(h=g(),h===wt&&(h=null),h!==wt?(b=$(),b!==wt?(125===t.charCodeAt(no)?(m=Et,no++):(m=wt,0===so&&a(Lt)),m!==wt?(y=$(),y!==wt?(io=e,r=Ae(n,o,s,l,h),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt),e}function _(){var e,r;return so++,t.substr(no,3)===Le?(e=Le,no+=3):(e=wt,0===so&&a(Se)),e===wt&&(t.substr(no,3)===Ie?(e=Ie,no+=3):(e=wt,0===so&&a(je))),so--,e===wt&&(r=wt,0===so&&a(Ee)),e}function k(){var e,r;return so++,t.substr(no,3)===De?(e=De,no+=3):(e=wt,0===so&&a(Ne)),so--,e===wt&&(r=wt,0===so&&a(Te)),e}function A(){var t,e;return t=no,e=E(),e===wt&&(e=L(),e===wt&&(e=S(),e===wt&&(e=I()))),e!==wt&&(io=t,e=Be(e)),t=e}function E(){var e,r;return so++,t.substr(no,2)===He?(e=He,no+=2):(e=wt,0===so&&a(Re)),e===wt&&(t.substr(no,3)===We?(e=We,no+=3):(e=wt,0===so&&a(Fe)),e===wt&&(t.substr(no,2)===Me?(e=Me,no+=2):(e=wt,0===so&&a(Ge)),e===wt&&(t.substr(no,5)===qe?(e=qe,no+=5):(e=wt,0===so&&a(ze)),e===wt&&(t.substr(no,3)===Ue?(e=Ue,no+=3):(e=wt,0===so&&a(Xe)),e===wt&&(t.substr(no,2)===Pe?(e=Pe,no+=2):(e=wt,0===so&&a(Ve)),e===wt&&(t.substr(no,4)===$e?(e=$e,no+=4):(e=wt,0===so&&a(Ke)),e===wt&&(t.substr(no,2)===Ze?(e=Ze,no+=2):(e=wt,0===so&&a(Je)),e===wt&&(t.substr(no,3)===Qe?(e=Qe,no+=3):(e=wt,0===so&&a(Ye)))))))))),so--,e===wt&&(r=wt,0===so&&a(Oe)),e}function L(){var e,r;return so++,t.substr(no,2)===er?(e=er,no+=2):(e=wt,0===so&&a(rr)),e===wt&&(t.substr(no,3)===nr?(e=nr,no+=3):(e=wt,0===so&&a(ir)),e===wt&&(t.substr(no,2)===or?(e=or,no+=2):(e=wt,0===so&&a(ar)),e===wt&&(t.substr(no,2)===cr?(e=cr,no+=2):(e=wt,0===so&&a(sr)),e===wt&&(t.substr(no,2)===ur?(e=ur,no+=2):(e=wt,0===so&&a(lr)),e===wt&&(t.substr(no,2).toLowerCase()===dr?(e=t.substr(no,2),no+=2):(e=wt,0===so&&a(pr))))))),so--,e===wt&&(r=wt,0===so&&a(tr)),e}function S(){var e,r;return so++,t.substr(no,2)===hr?(e=hr,no+=2):(e=wt,0===so&&a(gr)),e===wt&&(t.substr(no,3)===br?(e=br,no+=3):(e=wt,0===so&&a(mr)),e===wt&&(t.substr(no,2)===yr?(e=yr,no+=2):(e=wt,0===so&&a(vr)),e===wt&&(t.substr(no,2)===xr?(e=xr,no+=2):(e=wt,0===so&&a(wr)),e===wt&&(t.substr(no,2)===Cr?(e=Cr,no+=2):(e=wt,0===so&&a(_r)),e===wt&&(t.substr(no,2).toLowerCase()===kr?(e=t.substr(no,2),no+=2):(e=wt,0===so&&a(Ar))))))),so--,e===wt&&(r=wt,0===so&&a(fr)),e}function I(){var e,r;return so++,t.substr(no,4).toLowerCase()===Lr?(e=t.substr(no,4),no+=4):(e=wt,0===so&&a(Sr)),e===wt&&(t.substr(no,4).toLowerCase()===Ir?(e=t.substr(no,4),no+=4):(e=wt,0===so&&a(jr)),e===wt&&(t.substr(no,4).toLowerCase()===Tr?(e=t.substr(no,4),no+=4):(e=wt,0===so&&a(Dr)),e===wt&&(t.substr(no,3).toLowerCase()===Nr?(e=t.substr(no,3),no+=3):(e=wt,0===so&&a(Br))))),so--,e===wt&&(r=wt,0===so&&a(Er)),e}function j(){var e,r;return so++,e=no,t.substr(no,3).toLowerCase()===Hr?(r=t.substr(no,3),no+=3):(r=wt,0===so&&a(Rr)),r===wt&&(t.substr(no,4).toLowerCase()===Wr?(r=t.substr(no,4),no+=4):(r=wt,0===so&&a(Fr)),r===wt&&(t.substr(no,3).toLowerCase()===Mr?(r=t.substr(no,3),no+=3):(r=wt,0===so&&a(Gr)),r===wt&&(t.substr(no,5).toLowerCase()===qr?(r=t.substr(no,5),no+=5):(r=wt,0===so&&a(zr)),r===wt&&(t.substr(no,3).toLowerCase()===Ur?(r=t.substr(no,3),no+=3):(r=wt,0===so&&a(Xr)),r===wt&&(t.substr(no,3).toLowerCase()===Pr?(r=t.substr(no,3),no+=3):(r=wt,0===so&&a(Vr)),r===wt&&(t.substr(no,6).toLowerCase()===$r?(r=t.substr(no,6),no+=6):(r=wt,0===so&&a(Kr)),r===wt&&(t.substr(no,3).toLowerCase()===Zr?(r=t.substr(no,3),no+=3):(r=wt,0===so&&a(Jr)),r===wt&&(t.substr(no,8).toLowerCase()===Qr?(r=t.substr(no,8),no+=8):(r=wt,0===so&&a(Yr)),r===wt&&(t.substr(no,6).toLowerCase()===tn?(r=t.substr(no,6),no+=6):(r=wt,0===so&&a(en)),r===wt&&(t.substr(no,8).toLowerCase()===rn?(r=t.substr(no,8),no+=8):(r=wt,0===so&&a(nn)),r===wt&&(t.substr(no,6).toLowerCase()===on?(r=t.substr(no,6),no+=6):(r=wt,0===so&&a(an)),r===wt&&(t.substr(no,4).toLowerCase()===cn?(r=t.substr(no,4),no+=4):(r=wt,0===so&&a(sn)),r===wt&&(t.substr(no,3).toLowerCase()===un?(r=t.substr(no,3),no+=3):(r=wt,0===so&&a(ln)),r===wt&&(t.substr(no,3).toLowerCase()===dn?(r=t.substr(no,3),no+=3):(r=wt,0===so&&a(pn)))))))))))))))),r!==wt&&(io=e,r=fn(r)),e=r,so--,e===wt&&(r=wt,0===so&&a(Or)),e}function T(){var e,r,n,i,o,c;for(e=no,r=no,n=[],i=no,o=D(),o!==wt?(44===t.charCodeAt(no)?(c=Ht,no++):(c=wt,0===so&&a(Rt)),c!==wt?(io=i,o=fe(o),i=o):(no=i,i=wt)):(no=i,i=wt);i!==wt;)n.push(i),i=no,o=D(),o!==wt?(44===t.charCodeAt(no)?(c=Ht,no++):(c=wt,0===so&&a(Rt)),c!==wt?(io=i,o=fe(o),i=o):(no=i,i=wt)):(no=i,i=wt);return n!==wt?(i=no,o=D(),o!==wt&&(io=i,o=fe(o)),i=o,i!==wt?(n=[n,i],r=n):(no=r,r=wt)):(no=r,r=wt),r!==wt&&(io=e,r=Gt(r)),e=r}function D(){var e,r,n,i,o,c,s,u;return e=no,r=$(),r!==wt?(n=N(),n!==wt?(i=$(),i!==wt?(61===t.charCodeAt(no)?(o=Vt,no++):(o=wt,0===so&&a($t)),o!==wt?(c=$(),c!==wt?(s=H(),s!==wt?(u=$(),u!==wt?(io=e,r=hn(n,s),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt),e}function N(){var e,r;return so++,t.substr(no,5).toLowerCase()===bn?(e=t.substr(no,5),no+=5):(e=wt,0===so&&a(mn)),e===wt&&(t.substr(no,5).toLowerCase()===yn?(e=t.substr(no,5),no+=5):(e=wt,0===so&&a(vn)),e===wt&&(t.substr(no,2).toLowerCase()===xn?(e=t.substr(no,2),no+=2):(e=wt,0===so&&a(wn)),e===wt&&(t.substr(no,3).toLowerCase()===Cn?(e=t.substr(no,3),no+=3):(e=wt,0===so&&a(_n)),e===wt&&(t.substr(no,9).toLowerCase()===kn?(e=t.substr(no,9),no+=9):(e=wt,0===so&&a(An)),e===wt&&(t.substr(no,10).toLowerCase()===En?(e=t.substr(no,10),no+=10):(e=wt,0===so&&a(Ln)),e===wt&&(t.substr(no,9).toLowerCase()===Sn?(e=t.substr(no,9),no+=9):(e=wt,0===so&&a(In)),e===wt&&(t.substr(no,10).toLowerCase()===jn?(e=t.substr(no,10),no+=10):(e=wt,0===so&&a(Tn)),e===wt&&(t.substr(no,11).toLowerCase()===Dn?(e=t.substr(no,11),no+=11):(e=wt,0===so&&a(Nn)),e===wt&&(t.substr(no,12).toLowerCase()===Bn?(e=t.substr(no,12),no+=12):(e=wt,0===so&&a(On)),e===wt&&(t.substr(no,12).toLowerCase()===Hn?(e=t.substr(no,12),no+=12):(e=wt,0===so&&a(Rn)),e===wt&&(t.substr(no,13).toLowerCase()===Wn?(e=t.substr(no,13),no+=13):(e=wt,0===so&&a(Fn)),e===wt&&(t.substr(no,12).toLowerCase()===Mn?(e=t.substr(no,12),no+=12):(e=wt,0===so&&a(Gn)),e===wt&&(t.substr(no,13).toLowerCase()===qn?(e=t.substr(no,13),no+=13):(e=wt,0===so&&a(zn)),e===wt&&(t.substr(no,14).toLowerCase()===Un?(e=t.substr(no,14),no+=14):(e=wt,0===so&&a(Xn)),e===wt&&(t.substr(no,15).toLowerCase()===Pn?(e=t.substr(no,15),no+=15):(e=wt,0===so&&a(Vn)),e===wt&&(t.substr(no,7).toLowerCase()===$n?(e=t.substr(no,7),no+=7):(e=wt,0===so&&a(Kn)))))))))))))))))),so--,e===wt&&(r=wt,0===so&&a(gn)),e}function B(){var e,r,n,i;return so++,e=no,34===t.charCodeAt(no)?(r=Jn,no++):(r=wt,0===so&&a(Qn)),r!==wt?(n=O(),n!==wt?(34===t.charCodeAt(no)?(i=Jn,no++):(i=wt,0===so&&a(Qn)),i!==wt?(io=e,r=Yn(n),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt),so--,e===wt&&(r=wt,0===so&&a(Zn)),e}function O(){var e,r,n,i;for(e=[],r=no,n=no,so++,34===t.charCodeAt(no)?(i=Jn,no++):(i=wt,0===so&&a(Qn)),so--,i===wt?n=void 0:(no=n,n=wt),n!==wt?(t.substr(no,2)===ti?(i=ti,no+=2):(i=wt,0===so&&a(ei)),i===wt&&(t.length>no?(i=t.charAt(no),no++):(i=wt,0===so&&a(ri))),i!==wt?(io=r,n=ni(i),r=n):(no=r,r=wt)):(no=r,r=wt);r!==wt;)e.push(r),r=no,n=no,so++,34===t.charCodeAt(no)?(i=Jn,no++):(i=wt,0===so&&a(Qn)),so--,i===wt?n=void 0:(no=n,n=wt),n!==wt?(t.substr(no,2)===ti?(i=ti,no+=2):(i=wt,0===so&&a(ei)),i===wt&&(t.length>no?(i=t.charAt(no),no++):(i=wt,0===so&&a(ri))),i!==wt?(io=r,n=ni(i),r=n):(no=r,r=wt)):(no=r,r=wt);return e}function H(){var t,e;return so++,t=R(),t===wt&&(t=B()),so--,t===wt&&(e=wt,0===so&&a(ii)),t}function R(){var e,r,n;if(e=no,r=[],oi.test(t.charAt(no))?(n=t.charAt(no),no++):(n=wt,0===so&&a(ai)),n!==wt)for(;n!==wt;)r.push(n),oi.test(t.charAt(no))?(n=t.charAt(no),no++):(n=wt,0===so&&a(ai));else r=wt;return r!==wt&&(io=e,r=ci(r)),e=r}function W(){var e,r;return so++,e=no,ui.test(t.charAt(no))?(r=t.charAt(no),no++):(r=wt,0===so&&a(li)),r!==wt&&(io=e,r=ni(r)),e=r,so--,e===wt&&(r=wt,0===so&&a(si)),e}function F(){var e,r;return so++,e=no,pi.test(t.charAt(no))?(r=t.charAt(no),no++):(r=wt,0===so&&a(fi)),r!==wt&&(io=e,r=ni(r)),e=r,so--,e===wt&&(r=wt,0===so&&a(di)),e}function M(){var e;return t.substr(no,2)===hi?(e=hi,no+=2):(e=wt,0===so&&a(gi)),e}function G(){var e;return t.substr(no,2)===bi?(e=bi,no+=2):(e=wt,0===so&&a(mi)),e}function q(){var e,r,n;return e=no,r=no,so++,t.substr(no,2)===bi?(n=bi,no+=2):(n=wt,0===so&&a(mi)),so--,n===wt?r=void 0:(no=r,r=wt),r!==wt?(t.length>no?(n=t.charAt(no),no++):(n=wt,0===so&&a(ri)),n!==wt?(io=e,r=ni(n),e=r):(no=e,e=wt)):(no=e,e=wt),e}function z(){var t,e,r,n;if(t=no,e=M(),e!==wt){for(r=[],n=q();n!==wt;)r.push(n),n=q();r!==wt?(n=G(),n!==wt?(io=t,e=yi(e,r,n),t=e):(no=t,t=wt)):(no=t,t=wt)}else no=t,t=wt;return t}function U(){var e;return t.substr(no,2)===vi?(e=vi,no+=2):(e=wt,0===so&&a(xi)),e===wt&&(35===t.charCodeAt(no)?(e=wi,no++):(e=wt,0===so&&a(Ci))),e}function X(){var e;return _i.test(t.charAt(no))?(e=t.charAt(no),no++):(e=wt,0===so&&a(ki)),e}function P(){var t,e,r,n;if(t=no,e=U(),e!==wt){for(r=[],n=X();n!==wt;)r.push(n),n=X();r!==wt?(io=t,e=Ai(e,r),t=e):(no=t,t=wt)}else no=t,t=wt;return t}function V(){var t,e;return so++,t=P(),t===wt&&(t=z()),so--,t===wt&&(e=wt,0===so&&a(Ei)),t}function $(){var t,e;for(t=[],e=W(),e===wt&&(e=F(),e===wt&&(e=V()));e!==wt;)t.push(e),e=W(),e===wt&&(e=F(),e===wt&&(e=V()));return t}function K(){var t,e;return so++,t=no,e=Z(),e!==wt&&(io=t,e=Si(e)),t=e,t===wt&&(t=no,e=J(),e!==wt&&(io=t,e=Ii(e)),t=e),so--,t===wt&&(e=wt,0===so&&a(Li)),t}function Z(){var e,r,n,i;return e=no,34===t.charCodeAt(no)?(r=Jn,no++):(r=wt,0===so&&a(Qn)),r!==wt?(n=J(),n!==wt?(34===t.charCodeAt(no)?(i=Jn,no++):(i=wt,0===so&&a(Qn)),i!==wt?(io=e,r=ji(n),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt),e}function J(){var t;return t=Y(),t===wt&&(t=Q()),t}function Q(){var e,r,n;if(e=no,r=[],Ti.test(t.charAt(no))?(n=t.charAt(no),no++):(n=wt,0===so&&a(Di)),n!==wt)for(;n!==wt;)r.push(n),Ti.test(t.charAt(no))?(n=t.charAt(no),no++):(n=wt,0===so&&a(Di));else r=wt;return r!==wt&&(io=e,r=Ni(r)),e=r}function Y(){var e,r,n,i,o;return e=no,r=no,n=Q(),n!==wt?(46===t.charCodeAt(no)?(i=Bi,no++):(i=wt,0===so&&a(Oi)),i!==wt?(o=Q(),o!==wt?(n=[n,i,o],r=n):(no=r,r=wt)):(no=r,r=wt)):(no=r,r=wt),r!==wt&&(io=e,r=Hi(r)),e=r}function tt(){var t,e;return so++,t=no,e=et(),e!==wt&&(io=t,e=Wi(e)),t=e,t===wt&&(t=no,e=rt(),e!==wt&&(io=t,e=Fi(e)),t=e),so--,t===wt&&(e=wt,0===so&&a(Ri)),t}function et(){var e,r,n,i;return e=no,34===t.charCodeAt(no)?(r=Jn,no++):(r=wt,0===so&&a(Qn)),r!==wt?(n=rt(),n!==wt?(34===t.charCodeAt(no)?(i=Jn,no++):(i=wt,0===so&&a(Qn)),i!==wt?(io=e,r=Si(n),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt),e}function rt(){var e;return t.substr(no,4).toLowerCase()===Mi?(e=t.substr(no,4),no+=4):(e=wt,0===so&&a(Gi)),e===wt&&(t.substr(no,5).toLowerCase()===qi?(e=t.substr(no,5),no+=5):(e=wt,0===so&&a(zi)),e===wt&&(t.substr(no,2).toLowerCase()===Ui?(e=t.substr(no,2),no+=2):(e=wt,0===so&&a(Xi)),e===wt&&(t.substr(no,3).toLowerCase()===Pi?(e=t.substr(no,3),no+=3):(e=wt,0===so&&a(Vi)),e===wt&&(48===t.charCodeAt(no)?(e=$i,no++):(e=wt,0===so&&a(Ki)),e===wt&&(49===t.charCodeAt(no)?(e=Zi,no++):(e=wt,0===so&&a(Ji))))))),e}function nt(){var t,e;return so++,t=it(),t===wt&&(t=ot()),so--,t===wt&&(e=wt,0===so&&a(Qi)),t}function it(){var e,r,n,i;return e=no,34===t.charCodeAt(no)?(r=Jn,no++):(r=wt,0===so&&a(Qn)),r!==wt?(n=ot(),n!==wt?(34===t.charCodeAt(no)?(i=Jn,no++):(i=wt,0===so&&a(Qn)),i!==wt?(io=e,r=Si(n),e=r):(no=e,e=wt)):(no=e,e=wt)):(no=e,e=wt),e}function ot(){var e,r;return e=no,r=J(),r!==wt&&(io=e,r=Yi(r)),e=r,e===wt&&(e=no,t.substr(no,4).toLowerCase()===to?(r=t.substr(no,4),no+=4):(r=wt,0===so&&a(eo)),r!==wt&&(io=e,r=ro(r)),e=r),e}function at(t,e){e&&Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]})}function ct(t,e){return t=t?t:{},at(t,e),t}function st(t){var e={};return t[0].forEach(function(t){e=ct(e,t)}),ct(e,t[1])}function ut(t){return["true","on","1"].indexOf(t.toLowerCase())>-1}function lt(t,e){var r={};return r[t.toLowerCase()]=e,r}function dt(t,e){return void 0===e||"*"===e||t.entities.some(function(t){return t.name===e})}function pt(t){return["box","abox","rbox","note","msc","hscale","width","arcgradient","wordwraparcs","label","color","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"].indexOf(t)>-1}function ft(t,e){return"Entity '"+t+"' in arc '"+e.from+" "+e.kind+" "+e.to+"' is not defined."}function ht(t,e){this.name="EntityNotDefinedError",this.message=ft(t,e),e.location&&(this.location=e.location,this.location.start.line++,this.location.end.line++)}function gt(t,e){return t||(t={},t.entities=[]),e&&e.arcs&&e.arcs.forEach(function(e){e.forEach(function(e){if(e.from&&!dt(t,e.from))throw new ht(e.from,e);if(e.to&&!dt(t,e.to))throw new ht(e.to,e);e.location&&delete e.location,e.arcs&&gt(t,e)})}),t}function bt(t){return t&&t.options?!!t.options.watermark||!!t.options.width&&"auto"===t.options.width:!1}function mt(t){return t&&t.arcs?t.arcs.some(function(t){return t.some(function(t){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(t.kind)>-1})}):!1}function yt(t,e){var r=bt(t),n=mt(e);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}var vt,xt=arguments.length>1?arguments[1]:{},wt={},Ct={program:s},_t=s,kt="{",At={type:"literal",value:"{",description:'"{"'},Et="}",Lt={type:"literal",value:"}",description:'"}"'},St=function(t,e){e[1]=gt(e[1],e[2]);var r=ct(e[0],ct(e[1],e[2]));return r=ct({meta:yt(e[0],e[2])},r),t.length>0&&(r=ct({precomment:t},r)),r},It="msc",jt={type:"literal",value:"msc",description:'"msc"'},Tt="xu",Dt={type:"literal",value:"xu",description:'"xu"'},Nt=function(t){return{options:t}},Bt=function(t){return{entities:t}},Ot=function(t){return{arcs:t}},Ht=",",Rt={type:"literal",value:",",description:'","'},Wt=function(t){return t},Ft=";",Mt={type:"literal",value:";",description:'";"'},Gt=function(t){return st(t)},qt={type:"other",description:"option"},zt="hscale",Ut={type:"literal",value:"hscale",description:'"hscale"'},Xt="arcgradient",Pt={type:"literal",value:"arcgradient",description:'"arcgradient"'},Vt="=",$t={type:"literal",value:"=",description:'"="'},Kt=function(t,e){return lt(t,e)},Zt="width",Jt={type:"literal",value:"width",description:'"width"'},Qt="wordwraparcs",Yt={type:"literal",value:"wordwraparcs",description:'"wordwraparcs"'},te=function(t,e){var r={};return r[t.toLowerCase()]=ut(e),r},ee="watermark",re={type:"literal",value:"watermark",description:'"watermark"'},ne=function(t){return t},ie=function(t){return t[0].push(t[1]),t[0]},oe={type:"other",description:"entity"},ae="[",ce={type:"literal",value:"[",description:'"["'},se="]",ue={type:"literal",value:"]",description:'"]"'},le=function(t,e){return e},de=function(t,e){return ct({name:t},e)},pe=function(t,e){return pt(t)&&n("MscGen keywords aren't allowed as entity names (embed them in quotes if you need them)"),ct({name:t},e)},fe=function(t){return t},he=function(t){return[t]},ge=function(t){return t[0].push(t[1][0]),t[0]},be=function(t,e){return e},me=function(t,e){return ct(t,e)},ye=function(t){return{kind:t}},ve=function(t,e,n){return{kind:e,from:t,to:n,location:r()}},xe="*",we={type:"literal",value:"*",description:'"*"'},Ce=function(t,e){return{kind:t,from:"*",to:e,location:r()}},_e=function(t,e){return{kind:e,from:t,to:"*",location:r()}},ke=function(t,e,r,n){return n},Ae=function(t,e,n,i,o){var a={kind:e,from:t,to:n,location:r(),arcs:o};return ct(a,i)},Ee={type:"other",description:"empty row"},Le="|||",Se={type:"literal",value:"|||",description:'"|||"'},Ie="...",je={type:"literal",value:"...",description:'"..."'},Te={type:"other",description:"---"},De="---",Ne={type:"literal",value:"---",description:'"---"'},Be=function(t){return t.toLowerCase()},Oe={type:"other",description:"bi-directional arrow"},He="--",Re={type:"literal",value:"--",description:'"--"'},We="<->",Fe={type:"literal",value:"<->",description:'"<->"'},Me="==",Ge={type:"literal",value:"==",description:'"=="'},qe="<<=>>",ze={type:"literal",value:"<<=>>",description:'"<<=>>"'},Ue="<=>",Xe={type:"literal",value:"<=>",description:'"<=>"'},Pe="..",Ve={type:"literal",value:"..",description:'".."'},$e="<<>>",Ke={type:"literal",value:"<<>>",description:'"<<>>"'},Ze="::",Je={type:"literal",value:"::",description:'"::"'},Qe="<:>",Ye={type:"literal",value:"<:>",description:'"<:>"'},tr={type:"other",description:"left to right arrow"},er="->",rr={type:"literal",value:"->",description:'"->"'},nr="=>>",ir={type:"literal",value:"=>>",description:'"=>>"'},or="=>",ar={type:"literal",value:"=>",description:'"=>"'},cr=">>",sr={type:"literal",value:">>",description:'">>"'},ur=":>",lr={type:"literal",value:":>",description:'":>"'},dr="-x",pr={type:"literal",value:"-x",description:'"-x"'},fr={type:"other",description:"right to left arrow"},hr="<-",gr={type:"literal",value:"<-",description:'"<-"'},br="<<=",mr={type:"literal",value:"<<=",description:'"<<="'},yr="<=",vr={type:"literal",value:"<=",description:'"<="'},xr="<<",wr={type:"literal",value:"<<",description:'"<<"'},Cr="<:",_r={type:"literal",value:"<:",description:'"<:"'},kr="x-",Ar={type:"literal",value:"x-",description:'"x-"'},Er={type:"other",description:"box"},Lr="note",Sr={type:"literal",value:"note",description:'"note"'},Ir="abox",jr={type:"literal",value:"abox",description:'"abox"'},Tr="rbox",Dr={type:"literal",value:"rbox",description:'"rbox"'},Nr="box",Br={type:"literal",value:"box",description:'"box"'},Or={type:"other",description:"inline expression"},Hr="alt",Rr={type:"literal",value:"alt",description:'"alt"'},Wr="else",Fr={type:"literal",value:"else",description:'"else"'},Mr="opt",Gr={type:"literal",value:"opt",description:'"opt"'},qr="break",zr={type:"literal",value:"break",description:'"break"'},Ur="par",Xr={type:"literal",value:"par",description:'"par"'},Pr="seq",Vr={type:"literal",value:"seq",description:'"seq"'},$r="strict",Kr={type:"literal",value:"strict",description:'"strict"'},Zr="neg",Jr={type:"literal",value:"neg",description:'"neg"'},Qr="critical",Yr={type:"literal",value:"critical",description:'"critical"'},tn="ignore",en={type:"literal",value:"ignore",description:'"ignore"'},rn="consider",nn={type:"literal",value:"consider",description:'"consider"'},on="assert",an={type:"literal",value:"assert",description:'"assert"'},cn="loop",sn={type:"literal",value:"loop",description:'"loop"'},un="ref",ln={type:"literal",value:"ref",description:'"ref"'},dn="exc",pn={type:"literal",value:"exc",description:'"exc"'},fn=function(t){return t.toLowerCase()},hn=function(t,e){var r={};return r[t.toLowerCase().replace("colour","color")]=e,r},gn={type:"other",description:"attribute name"},bn="label",mn={type:"literal",value:"label",description:'"label"'},yn="idurl",vn={type:"literal",value:"idurl",description:'"idurl"'},xn="id",wn={type:"literal",value:"id",description:'"id"'},Cn="url",_n={type:"literal",value:"url",description:'"url"'},kn="linecolor",An={type:"literal",value:"linecolor",description:'"linecolor"'},En="linecolour",Ln={type:"literal",value:"linecolour",description:'"linecolour"'},Sn="textcolor",In={type:"literal",value:"textcolor",description:'"textcolor"'},jn="textcolour",Tn={type:"literal",value:"textcolour",description:'"textcolour"'},Dn="textbgcolor",Nn={type:"literal",value:"textbgcolor",description:'"textbgcolor"'},Bn="textbgcolour",On={type:"literal",value:"textbgcolour",description:'"textbgcolour"'},Hn="arclinecolor",Rn={type:"literal",value:"arclinecolor",description:'"arclinecolor"'},Wn="arclinecolour",Fn={type:"literal",value:"arclinecolour",
description:'"arclinecolour"'},Mn="arctextcolor",Gn={type:"literal",value:"arctextcolor",description:'"arctextcolor"'},qn="arctextcolour",zn={type:"literal",value:"arctextcolour",description:'"arctextcolour"'},Un="arctextbgcolor",Xn={type:"literal",value:"arctextbgcolor",description:'"arctextbgcolor"'},Pn="arctextbgcolour",Vn={type:"literal",value:"arctextbgcolour",description:'"arctextbgcolour"'},$n="arcskip",Kn={type:"literal",value:"arcskip",description:'"arcskip"'},Zn={type:"other",description:"double quoted string"},Jn='"',Qn={type:"literal",value:'"',description:'"\\""'},Yn=function(t){return t.join("")},ti='\\"',ei={type:"literal",value:'\\"',description:'"\\\\\\""'},ri={type:"any",description:"any character"},ni=function(t){return t},ii={type:"other",description:"identifier"},oi=/^[A-Za-z_0-9]/,ai={type:"class",value:"[A-Za-z_0-9]",description:"[A-Za-z_0-9]"},ci=function(t){return t.join("")},si={type:"other",description:"whitespace"},ui=/^[ \t]/,li={type:"class",value:"[ \\t]",description:"[ \\t]"},di={type:"other",description:"lineend"},pi=/^[\r\n]/,fi={type:"class",value:"[\\r\\n]",description:"[\\r\\n]"},hi="/*",gi={type:"literal",value:"/*",description:'"/*"'},bi="*/",mi={type:"literal",value:"*/",description:'"*/"'},yi=function(t,e,r){return t+e.join("")+r},vi="//",xi={type:"literal",value:"//",description:'"//"'},wi="#",Ci={type:"literal",value:"#",description:'"#"'},_i=/^[^\r\n]/,ki={type:"class",value:"[^\\r\\n]",description:"[^\\r\\n]"},Ai=function(t,e){return t+e.join("")},Ei={type:"other",description:"comment"},Li={type:"other",description:"number"},Si=function(t){return t},Ii=function(t){return t.toString()},ji=function(t){return t.toString()},Ti=/^[0-9]/,Di={type:"class",value:"[0-9]",description:"[0-9]"},Ni=function(t){return parseInt(t.join(""),10)},Bi=".",Oi={type:"literal",value:".",description:'"."'},Hi=function(t){return parseFloat(t.join(""))},Ri={type:"other",description:"boolean"},Wi=function(t){return t},Fi=function(t){return t.toString()},Mi="true",Gi={type:"literal",value:"true",description:'"true"'},qi="false",zi={type:"literal",value:"false",description:'"false"'},Ui="on",Xi={type:"literal",value:"on",description:'"on"'},Pi="off",Vi={type:"literal",value:"off",description:'"off"'},$i="0",Ki={type:"literal",value:"0",description:'"0"'},Zi="1",Ji={type:"literal",value:"1",description:'"1"'},Qi={type:"other",description:"size"},Yi=function(t){return t.toString()},to="auto",eo={type:"literal",value:"auto",description:'"auto"'},ro=function(t){return t.toLowerCase()},no=0,io=0,oo=[{line:1,column:1,seenCR:!1}],ao=0,co=[],so=0;if("startRule"in xt){if(!(xt.startRule in Ct))throw new Error("Can't start parsing from rule \""+xt.startRule+'".');_t=Ct[xt.startRule]}if(vt=_t(),vt!==wt&&no===t.length)return vt;throw vt!==wt&&no<t.length&&a({type:"end",description:"end of input"}),c(null,co,ao<t.length?t.charAt(ao):null,ao<t.length?o(ao,ao+1):o(ao,ao))}return t(e,Error),{SyntaxError:e,parse:r}}),r("lib/mscgenjs-core/parse/msgennyparser",[],function(){"use strict";function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function r(t){function r(e){var r,n,i=fi[e];if(i)return i;for(r=e-1;!fi[r];)r--;for(i=fi[r],i={line:i.line,column:i.column,seenCR:i.seenCR};e>r;)n=t.charAt(r),"\n"===n?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),r++;return fi[e]=i,i}function n(t,e){var n=r(t),i=r(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:i.line,column:i.column}}}function i(t){hi>di||(di>hi&&(hi=di,gi=[]),gi.push(t))}function o(t,r,n,i){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function a(t,e){function r(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}var n,i,o,a=new Array(t.length);for(o=0;o<t.length;o++)a[o]=t[o].description;return n=t.length>1?a.slice(0,-1).join(", ")+" or "+a[t.length-1]:a[0],i=e?'"'+r(e)+'"':"end of input","Expected "+n+" but "+i+" found."}return null!==r&&o(r),new e(null!==t?t:a(r,n),r,n,i)}function a(){var t,e,r,n;return t=di,e=U(),e!==gt?(r=c(),r!==gt?(n=U(),n!==gt?(pi=t,e=yt(e,r),t=e):(di=t,t=gt)):(di=t,t=gt)):(di=t,t=gt),t}function c(){var t,e,r,n,i;return t=di,e=di,r=s(),r!==gt&&(pi=e,r=vt(r)),e=r,e===gt&&(e=null),e!==gt?(r=di,n=l(),n!==gt&&(pi=r,n=xt(n)),r=n,r===gt&&(r=null),r!==gt?(n=di,i=p(),i!==gt&&(pi=n,i=wt(i)),n=i,n===gt&&(n=null),n!==gt?(e=[e,r,n],t=e):(di=t,t=gt)):(di=t,t=gt)):(di=t,t=gt),t}function s(){var e,r,n,o,a,c;for(e=di,r=di,n=[],o=di,a=u(),a!==gt?(44===t.charCodeAt(di)?(c=Ct,di++):(c=gt,0===bi&&i(_t)),c!==gt?(pi=o,a=kt(a),o=a):(di=o,o=gt)):(di=o,o=gt);o!==gt;)n.push(o),o=di,a=u(),a!==gt?(44===t.charCodeAt(di)?(c=Ct,di++):(c=gt,0===bi&&i(_t)),c!==gt?(pi=o,a=kt(a),o=a):(di=o,o=gt)):(di=o,o=gt);return n!==gt?(o=di,a=u(),a!==gt?(59===t.charCodeAt(di)?(c=At,di++):(c=gt,0===bi&&i(Et)),c!==gt?(pi=o,a=kt(a),o=a):(di=o,o=gt)):(di=o,o=gt),o!==gt?(n=[n,o],r=n):(di=r,r=gt)):(di=r,r=gt),r!==gt&&(pi=e,r=Lt(r)),e=r}function u(){var e,r,n,o,a,c,s,u;return e=di,r=U(),r!==gt?(t.substr(di,6).toLowerCase()===St?(n=t.substr(di,6),di+=6):(n=gt,0===bi&&i(It)),n===gt&&(t.substr(di,11).toLowerCase()===jt?(n=t.substr(di,11),di+=11):(n=gt,0===bi&&i(Tt))),n!==gt?(o=U(),o!==gt?(61===t.charCodeAt(di)?(a=Dt,di++):(a=gt,0===bi&&i(Nt)),a!==gt?(c=U(),c!==gt?(s=X(),s!==gt?(u=U(),u!==gt?(pi=e,r=Bt(n,s),e=r):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt),e===gt&&(e=di,r=U(),r!==gt?(t.substr(di,5).toLowerCase()===Ot?(n=t.substr(di,5),di+=5):(n=gt,0===bi&&i(Ht)),n!==gt?(o=U(),o!==gt?(61===t.charCodeAt(di)?(a=Dt,di++):(a=gt,0===bi&&i(Nt)),a!==gt?(c=U(),c!==gt?(s=Y(),s!==gt?(u=U(),u!==gt?(pi=e,r=Bt(n,s),e=r):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt),e===gt&&(e=di,r=U(),r!==gt?(t.substr(di,12).toLowerCase()===Rt?(n=t.substr(di,12),di+=12):(n=gt,0===bi&&i(Wt)),n!==gt?(o=U(),o!==gt?(61===t.charCodeAt(di)?(a=Dt,di++):(a=gt,0===bi&&i(Nt)),a!==gt?(c=U(),c!==gt?(s=Z(),s!==gt?(u=U(),u!==gt?(pi=e,r=Ft(n,s),e=r):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt),e===gt&&(e=di,r=U(),r!==gt?(t.substr(di,9).toLowerCase()===Mt?(n=t.substr(di,9),di+=9):(n=gt,0===bi&&i(Gt)),n!==gt?(o=U(),o!==gt?(61===t.charCodeAt(di)?(a=Dt,di++):(a=gt,0===bi&&i(Nt)),a!==gt?(c=U(),c!==gt?(s=I(),s!==gt?(u=U(),u!==gt?(pi=e,r=Bt(n,s),e=r):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)))),e}function l(){var e,r,n,o,a,c;for(e=di,r=di,n=[],o=di,a=d(),a!==gt?(44===t.charCodeAt(di)?(c=Ct,di++):(c=gt,0===bi&&i(_t)),c!==gt?(pi=o,a=qt(a),o=a):(di=o,o=gt)):(di=o,o=gt);o!==gt;)n.push(o),o=di,a=d(),a!==gt?(44===t.charCodeAt(di)?(c=Ct,di++):(c=gt,0===bi&&i(_t)),c!==gt?(pi=o,a=qt(a),o=a):(di=o,o=gt)):(di=o,o=gt);return n!==gt?(o=di,a=d(),a!==gt?(59===t.charCodeAt(di)?(c=At,di++):(c=gt,0===bi&&i(Et)),c!==gt?(pi=o,a=qt(a),o=a):(di=o,o=gt)):(di=o,o=gt),o!==gt?(n=[n,o],r=n):(di=r,r=gt)):(di=r,r=gt),r!==gt&&(pi=e,r=zt(r)),e=r}function d(){var e,r,n,o,a,c,s,u,l;return bi++,e=di,r=U(),r!==gt?(n=N(),n!==gt?(o=U(),o!==gt?(a=di,58===t.charCodeAt(di)?(c=Xt,di++):(c=gt,0===bi&&i(Pt)),c!==gt?(s=U(),s!==gt?(u=S(),u!==gt?(l=U(),l!==gt?(pi=a,c=Vt(n,u),a=c):(di=a,a=gt)):(di=a,a=gt)):(di=a,a=gt)):(di=a,a=gt),a===gt&&(a=null),a!==gt?(pi=e,r=$t(n,a),e=r):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt),bi--,e===gt&&(r=gt,0===bi&&i(Ut)),e}function p(){var e,r,n,o,a;if(e=[],r=di,n=f(),n!==gt?(o=U(),o!==gt?(59===t.charCodeAt(di)?(a=At,di++):(a=gt,0===bi&&i(Et)),a!==gt?(pi=r,n=Kt(n),r=n):(di=r,r=gt)):(di=r,r=gt)):(di=r,r=gt),r!==gt)for(;r!==gt;)e.push(r),r=di,n=f(),n!==gt?(o=U(),o!==gt?(59===t.charCodeAt(di)?(a=At,di++):(a=gt,0===bi&&i(Et)),a!==gt?(pi=r,n=Kt(n),r=n):(di=r,r=gt)):(di=r,r=gt)):(di=r,r=gt);else e=gt;return e}function f(){var e,r,n,o,a,c;for(e=di,r=di,n=[],o=di,a=h(),a!==gt?(44===t.charCodeAt(di)?(c=Ct,di++):(c=gt,0===bi&&i(_t)),c!==gt?(pi=o,a=Kt(a),o=a):(di=o,o=gt)):(di=o,o=gt);o!==gt;)n.push(o),o=di,a=h(),a!==gt?(44===t.charCodeAt(di)?(c=Ct,di++):(c=gt,0===bi&&i(_t)),c!==gt?(pi=o,a=Kt(a),o=a):(di=o,o=gt)):(di=o,o=gt);return n!==gt?(o=di,a=h(),a!==gt&&(pi=o,a=Zt(a)),o=a,o!==gt?(n=[n,o],r=n):(di=r,r=gt)):(di=r,r=gt),r!==gt&&(pi=e,r=Jt(r)),e=r}function h(){var t;return t=g(),t===gt&&(t=v()),t}function g(){var e,r,n,o,a,c,s;return e=di,r=di,n=b(),n!==gt&&(pi=r,n=Qt(n)),r=n,r===gt&&(r=di,n=y(),n!==gt&&(pi=r,n=Yt(n)),r=n,r===gt&&(r=di,n=m(),n!==gt&&(pi=r,n=te(n)),r=n)),r!==gt?(n=di,58===t.charCodeAt(di)?(o=Xt,di++):(o=gt,0===bi&&i(Pt)),o!==gt?(a=U(),a!==gt?(c=S(),c!==gt?(s=U(),s!==gt?(pi=n,o=ee(r,c),n=o):(di=n,n=gt)):(di=n,n=gt)):(di=n,n=gt)):(di=n,n=gt),n===gt&&(n=null),n!==gt?(pi=e,r=re(r,n),e=r):(di=e,e=gt)):(di=e,e=gt),e}function b(){var t,e,r,n;return t=di,e=U(),e!==gt?(r=x(),r!==gt?(n=U(),n!==gt?(pi=t,e=ne(r),t=e):(di=t,t=gt)):(di=t,t=gt)):(di=t,t=gt),t}function m(){var t,e,r,n;return t=di,e=U(),e!==gt?(r=w(),r!==gt?(n=U(),n!==gt?(pi=t,e=ne(r),t=e):(di=t,t=gt)):(di=t,t=gt)):(di=t,t=gt),t}function y(){var e,r,n,o,a,c,s,u;return e=di,r=U(),r!==gt?(n=N(),n!==gt?(o=U(),o!==gt?(a=C(),a!==gt?(c=U(),c!==gt?(s=N(),s!==gt?(u=U(),u!==gt?(pi=e,r=ie(n,a,s),e=r):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt),e===gt&&(e=di,r=U(),r!==gt?(42===t.charCodeAt(di)?(n=oe,di++):(n=gt,0===bi&&i(ae)),n!==gt?(o=U(),o!==gt?(a=A(),a!==gt?(c=U(),c!==gt?(s=N(),s!==gt?(u=U(),u!==gt?(pi=e,r=ce(a,s),e=r):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt),e===gt&&(e=di,r=U(),r!==gt?(n=N(),n!==gt?(o=U(),o!==gt?(a=k(),a!==gt?(c=U(),c!==gt?(42===t.charCodeAt(di)?(s=oe,di++):(s=gt,0===bi&&i(ae)),s!==gt?(u=U(),u!==gt?(pi=e,r=se(n,a),e=r):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt),e===gt&&(e=di,r=U(),r!==gt?(n=N(),n!==gt?(o=U(),o!==gt?(a=_(),a!==gt?(c=U(),c!==gt?(42===t.charCodeAt(di)?(s=oe,di++):(s=gt,0===bi&&i(ae)),s!==gt?(u=U(),u!==gt?(pi=e,r=se(n,a),e=r):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)))),e}function v(){var e,r,n,o,a,c,s,u,l,d,f,h,g,b,m;return e=di,r=U(),r!==gt?(n=N(),n!==gt?(o=U(),o!==gt?(a=L(),a!==gt?(c=U(),c!==gt?(s=N(),s!==gt?(u=U(),u!==gt?(l=di,58===t.charCodeAt(di)?(d=Xt,di++):(d=gt,0===bi&&i(Pt)),d!==gt?(f=U(),f!==gt?(h=S(),h!==gt?(g=U(),g!==gt?(pi=l,d=ue(n,a,s,h),l=d):(di=l,l=gt)):(di=l,l=gt)):(di=l,l=gt)):(di=l,l=gt),l===gt&&(l=null),l!==gt?(123===t.charCodeAt(di)?(d=le,di++):(d=gt,0===bi&&i(de)),d!==gt?(f=U(),f!==gt?(h=p(),h===gt&&(h=null),h!==gt?(g=U(),g!==gt?(125===t.charCodeAt(di)?(b=pe,di++):(b=gt,0===bi&&i(fe)),b!==gt?(m=U(),m!==gt?(pi=e,r=he(n,a,s,l,h),e=r):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt),e}function x(){var e,r;return bi++,t.substr(di,3)===be?(e=be,di+=3):(e=gt,0===bi&&i(me)),e===gt&&(t.substr(di,3)===ye?(e=ye,di+=3):(e=gt,0===bi&&i(ve))),bi--,e===gt&&(r=gt,0===bi&&i(ge)),e}function w(){var e,r;return bi++,t.substr(di,3)===we?(e=we,di+=3):(e=gt,0===bi&&i(Ce)),bi--,e===gt&&(r=gt,0===bi&&i(xe)),e}function C(){var t,e;return t=di,e=_(),e===gt&&(e=k(),e===gt&&(e=A(),e===gt&&(e=E()))),e!==gt&&(pi=t,e=_e(e)),t=e}function _(){var e,r;return bi++,t.substr(di,2)===Ae?(e=Ae,di+=2):(e=gt,0===bi&&i(Ee)),e===gt&&(t.substr(di,3)===Le?(e=Le,di+=3):(e=gt,0===bi&&i(Se)),e===gt&&(t.substr(di,2)===Ie?(e=Ie,di+=2):(e=gt,0===bi&&i(je)),e===gt&&(t.substr(di,5)===Te?(e=Te,di+=5):(e=gt,0===bi&&i(De)),e===gt&&(t.substr(di,3)===Ne?(e=Ne,di+=3):(e=gt,0===bi&&i(Be)),e===gt&&(t.substr(di,2)===Oe?(e=Oe,di+=2):(e=gt,0===bi&&i(He)),e===gt&&(t.substr(di,4)===Re?(e=Re,di+=4):(e=gt,0===bi&&i(We)),e===gt&&(t.substr(di,2)===Fe?(e=Fe,di+=2):(e=gt,0===bi&&i(Me)),e===gt&&(t.substr(di,3)===Ge?(e=Ge,di+=3):(e=gt,0===bi&&i(qe)))))))))),bi--,e===gt&&(r=gt,0===bi&&i(ke)),e}function k(){var e,r;return bi++,t.substr(di,2)===Ue?(e=Ue,di+=2):(e=gt,0===bi&&i(Xe)),e===gt&&(t.substr(di,3)===Pe?(e=Pe,di+=3):(e=gt,0===bi&&i(Ve)),e===gt&&(t.substr(di,2)===$e?(e=$e,di+=2):(e=gt,0===bi&&i(Ke)),e===gt&&(t.substr(di,2)===Ze?(e=Ze,di+=2):(e=gt,0===bi&&i(Je)),e===gt&&(t.substr(di,2)===Qe?(e=Qe,di+=2):(e=gt,0===bi&&i(Ye)),e===gt&&(t.substr(di,2).toLowerCase()===tr?(e=t.substr(di,2),di+=2):(e=gt,0===bi&&i(er))))))),bi--,e===gt&&(r=gt,0===bi&&i(ze)),e}function A(){var e,r;return bi++,t.substr(di,2)===nr?(e=nr,di+=2):(e=gt,0===bi&&i(ir)),e===gt&&(t.substr(di,3)===or?(e=or,di+=3):(e=gt,0===bi&&i(ar)),e===gt&&(t.substr(di,2)===cr?(e=cr,di+=2):(e=gt,0===bi&&i(sr)),e===gt&&(t.substr(di,2)===ur?(e=ur,di+=2):(e=gt,0===bi&&i(lr)),e===gt&&(t.substr(di,2)===dr?(e=dr,di+=2):(e=gt,0===bi&&i(pr)),e===gt&&(t.substr(di,2).toLowerCase()===fr?(e=t.substr(di,2),di+=2):(e=gt,0===bi&&i(hr))))))),bi--,e===gt&&(r=gt,0===bi&&i(rr)),e}function E(){var e,r;return bi++,t.substr(di,4).toLowerCase()===br?(e=t.substr(di,4),di+=4):(e=gt,0===bi&&i(mr)),e===gt&&(t.substr(di,4).toLowerCase()===yr?(e=t.substr(di,4),di+=4):(e=gt,0===bi&&i(vr)),e===gt&&(t.substr(di,4).toLowerCase()===xr?(e=t.substr(di,4),di+=4):(e=gt,0===bi&&i(wr)),e===gt&&(t.substr(di,3).toLowerCase()===Cr?(e=t.substr(di,3),di+=3):(e=gt,0===bi&&i(_r))))),bi--,e===gt&&(r=gt,0===bi&&i(gr)),e}function L(){var e,r;return bi++,e=di,t.substr(di,3).toLowerCase()===Ar?(r=t.substr(di,3),di+=3):(r=gt,0===bi&&i(Er)),r===gt&&(t.substr(di,4).toLowerCase()===Lr?(r=t.substr(di,4),di+=4):(r=gt,0===bi&&i(Sr)),r===gt&&(t.substr(di,3).toLowerCase()===Ir?(r=t.substr(di,3),di+=3):(r=gt,0===bi&&i(jr)),r===gt&&(t.substr(di,5).toLowerCase()===Tr?(r=t.substr(di,5),di+=5):(r=gt,0===bi&&i(Dr)),r===gt&&(t.substr(di,3).toLowerCase()===Nr?(r=t.substr(di,3),di+=3):(r=gt,0===bi&&i(Br)),r===gt&&(t.substr(di,3).toLowerCase()===Or?(r=t.substr(di,3),di+=3):(r=gt,0===bi&&i(Hr)),r===gt&&(t.substr(di,6).toLowerCase()===Rr?(r=t.substr(di,6),di+=6):(r=gt,0===bi&&i(Wr)),r===gt&&(t.substr(di,3).toLowerCase()===Fr?(r=t.substr(di,3),di+=3):(r=gt,0===bi&&i(Mr)),r===gt&&(t.substr(di,8).toLowerCase()===Gr?(r=t.substr(di,8),di+=8):(r=gt,0===bi&&i(qr)),r===gt&&(t.substr(di,6).toLowerCase()===zr?(r=t.substr(di,6),di+=6):(r=gt,0===bi&&i(Ur)),r===gt&&(t.substr(di,8).toLowerCase()===Xr?(r=t.substr(di,8),di+=8):(r=gt,0===bi&&i(Pr)),r===gt&&(t.substr(di,6).toLowerCase()===Vr?(r=t.substr(di,6),di+=6):(r=gt,0===bi&&i($r)),r===gt&&(t.substr(di,4).toLowerCase()===Kr?(r=t.substr(di,4),di+=4):(r=gt,0===bi&&i(Zr)),r===gt&&(t.substr(di,3).toLowerCase()===Jr?(r=t.substr(di,3),di+=3):(r=gt,0===bi&&i(Qr)),r===gt&&(t.substr(di,3).toLowerCase()===Yr?(r=t.substr(di,3),di+=3):(r=gt,0===bi&&i(tn)))))))))))))))),r!==gt&&(pi=e,r=en(r)),e=r,bi--,e===gt&&(r=gt,0===bi&&i(kr)),e}function S(){var t;return t=I(),t===gt&&(t=T()),t}function I(){var e,r,n,o;return bi++,e=di,34===t.charCodeAt(di)?(r=nn,di++):(r=gt,0===bi&&i(on)),r!==gt?(n=j(),n!==gt?(34===t.charCodeAt(di)?(o=nn,di++):(o=gt,0===bi&&i(on)),o!==gt?(pi=e,r=an(n),e=r):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt),bi--,e===gt&&(r=gt,0===bi&&i(rn)),e}function j(){var e,r,n,o;for(e=[],r=di,n=di,bi++,34===t.charCodeAt(di)?(o=nn,di++):(o=gt,0===bi&&i(on)),bi--,o===gt?n=void 0:(di=n,n=gt),n!==gt?(t.substr(di,2)===cn?(o=cn,di+=2):(o=gt,0===bi&&i(sn)),o===gt&&(t.length>di?(o=t.charAt(di),di++):(o=gt,0===bi&&i(un))),o!==gt?(pi=r,n=ln(o),r=n):(di=r,r=gt)):(di=r,r=gt);r!==gt;)e.push(r),r=di,n=di,bi++,34===t.charCodeAt(di)?(o=nn,di++):(o=gt,0===bi&&i(on)),bi--,o===gt?n=void 0:(di=n,n=gt),n!==gt?(t.substr(di,2)===cn?(o=cn,di+=2):(o=gt,0===bi&&i(sn)),o===gt&&(t.length>di?(o=t.charAt(di),di++):(o=gt,0===bi&&i(un))),o!==gt?(pi=r,n=ln(o),r=n):(di=r,r=gt)):(di=r,r=gt);return e}function T(){var t,e;return t=di,e=D(),e!==gt&&(pi=t,e=dn(e)),t=e}function D(){var e,r,n,o;for(e=[],r=di,n=di,bi++,44===t.charCodeAt(di)?(o=Ct,di++):(o=gt,0===bi&&i(_t)),o===gt&&(59===t.charCodeAt(di)?(o=At,di++):(o=gt,0===bi&&i(Et)),o===gt&&(123===t.charCodeAt(di)?(o=le,di++):(o=gt,0===bi&&i(de)))),bi--,o===gt?n=void 0:(di=n,n=gt),n!==gt?(t.length>di?(o=t.charAt(di),di++):(o=gt,0===bi&&i(un)),o!==gt?(pi=r,n=ln(o),r=n):(di=r,r=gt)):(di=r,r=gt);r!==gt;)e.push(r),r=di,n=di,bi++,44===t.charCodeAt(di)?(o=Ct,di++):(o=gt,0===bi&&i(_t)),o===gt&&(59===t.charCodeAt(di)?(o=At,di++):(o=gt,0===bi&&i(Et)),o===gt&&(123===t.charCodeAt(di)?(o=le,di++):(o=gt,0===bi&&i(de)))),bi--,o===gt?n=void 0:(di=n,n=gt),n!==gt?(t.length>di?(o=t.charAt(di),di++):(o=gt,0===bi&&i(un)),o!==gt?(pi=r,n=ln(o),r=n):(di=r,r=gt)):(di=r,r=gt);return e}function N(){var e,r,n;if(bi++,e=di,r=[],fn.test(t.charAt(di))?(n=t.charAt(di),di++):(n=gt,0===bi&&i(hn)),n!==gt)for(;n!==gt;)r.push(n),fn.test(t.charAt(di))?(n=t.charAt(di),di++):(n=gt,0===bi&&i(hn));else r=gt;return r!==gt&&(pi=e,r=gn(r)),e=r,e===gt&&(e=I()),bi--,e===gt&&(r=gt,0===bi&&i(pn)),e}function B(){var e,r;return bi++,e=di,mn.test(t.charAt(di))?(r=t.charAt(di),di++):(r=gt,0===bi&&i(yn)),r!==gt&&(pi=e,r=ln(r)),e=r,bi--,e===gt&&(r=gt,0===bi&&i(bn)),e}function O(){var e,r;return bi++,e=di,xn.test(t.charAt(di))?(r=t.charAt(di),di++):(r=gt,0===bi&&i(wn)),r!==gt&&(pi=e,r=ln(r)),e=r,bi--,e===gt&&(r=gt,0===bi&&i(vn)),e}function H(){var e;return t.substr(di,2)===Cn?(e=Cn,di+=2):(e=gt,0===bi&&i(_n)),e}function R(){var e;return t.substr(di,2)===kn?(e=kn,di+=2):(e=gt,0===bi&&i(An)),e}function W(){var e,r,n;return e=di,r=di,bi++,t.substr(di,2)===kn?(n=kn,di+=2):(n=gt,0===bi&&i(An)),bi--,n===gt?r=void 0:(di=r,r=gt),r!==gt?(t.length>di?(n=t.charAt(di),di++):(n=gt,0===bi&&i(un)),n!==gt?(pi=e,r=ln(n),e=r):(di=e,e=gt)):(di=e,e=gt),e}function F(){var t,e,r,n;if(t=di,e=H(),e!==gt){for(r=[],n=W();n!==gt;)r.push(n),n=W();r!==gt?(n=R(),n!==gt?(pi=t,e=En(e,r,n),t=e):(di=t,t=gt)):(di=t,t=gt)}else di=t,t=gt;return t}function M(){var e;return t.substr(di,2)===Ln?(e=Ln,di+=2):(e=gt,0===bi&&i(Sn)),e===gt&&(35===t.charCodeAt(di)?(e=In,di++):(e=gt,0===bi&&i(jn))),e}function G(){var e;return Tn.test(t.charAt(di))?(e=t.charAt(di),di++):(e=gt,0===bi&&i(Dn)),e}function q(){var t,e,r,n;if(t=di,e=M(),e!==gt){for(r=[],n=G();n!==gt;)r.push(n),n=G();r!==gt?(pi=t,e=Nn(e,r),t=e):(di=t,t=gt)}else di=t,t=gt;return t}function z(){var t,e;return bi++,t=q(),t===gt&&(t=F()),bi--,t===gt&&(e=gt,0===bi&&i(Bn)),t}function U(){var t,e;for(t=[],e=B(),e===gt&&(e=O(),e===gt&&(e=z()));e!==gt;)t.push(e),e=B(),e===gt&&(e=O(),e===gt&&(e=z()));return t}function X(){var t,e;return bi++,t=di,e=P(),e!==gt&&(pi=t,e=Hn(e)),t=e,t===gt&&(t=di,e=V(),e!==gt&&(pi=t,e=Rn(e)),t=e),bi--,t===gt&&(e=gt,0===bi&&i(On)),t}function P(){var e,r,n,o;return e=di,34===t.charCodeAt(di)?(r=nn,di++):(r=gt,0===bi&&i(on)),r!==gt?(n=V(),n!==gt?(34===t.charCodeAt(di)?(o=nn,di++):(o=gt,0===bi&&i(on)),o!==gt?(pi=e,r=Wn(n),e=r):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt),e}function V(){var t;return t=K(),t===gt&&(t=$()),t}function $(){var e,r,n;if(e=di,r=[],Fn.test(t.charAt(di))?(n=t.charAt(di),di++):(n=gt,0===bi&&i(Mn)),n!==gt)for(;n!==gt;)r.push(n),Fn.test(t.charAt(di))?(n=t.charAt(di),di++):(n=gt,0===bi&&i(Mn));else r=gt;return r!==gt&&(pi=e,r=Gn(r)),e=r}function K(){var e,r,n,o,a;return e=di,r=di,n=$(),n!==gt?(46===t.charCodeAt(di)?(o=qn,di++):(o=gt,0===bi&&i(zn)),o!==gt?(a=$(),a!==gt?(n=[n,o,a],r=n):(di=r,r=gt)):(di=r,r=gt)):(di=r,r=gt),r!==gt&&(pi=e,r=Un(r)),e=r}function Z(){var t,e;return bi++,t=di,e=J(),e!==gt&&(pi=t,e=Pn(e)),t=e,t===gt&&(t=di,e=Q(),e!==gt&&(pi=t,e=Vn(e)),t=e),bi--,t===gt&&(e=gt,0===bi&&i(Xn)),t}function J(){var e,r,n,o;return e=di,34===t.charCodeAt(di)?(r=nn,di++):(r=gt,0===bi&&i(on)),r!==gt?(n=Q(),n!==gt?(34===t.charCodeAt(di)?(o=nn,di++):(o=gt,0===bi&&i(on)),o!==gt?(pi=e,r=Hn(n),e=r):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt),e}function Q(){var e;return t.substr(di,4).toLowerCase()===$n?(e=t.substr(di,4),di+=4):(e=gt,0===bi&&i(Kn)),e===gt&&(t.substr(di,5).toLowerCase()===Zn?(e=t.substr(di,5),di+=5):(e=gt,0===bi&&i(Jn)),e===gt&&(t.substr(di,2).toLowerCase()===Qn?(e=t.substr(di,2),di+=2):(e=gt,0===bi&&i(Yn)),e===gt&&(t.substr(di,3).toLowerCase()===ti?(e=t.substr(di,3),di+=3):(e=gt,0===bi&&i(ei)),e===gt&&(48===t.charCodeAt(di)?(e=ri,di++):(e=gt,0===bi&&i(ni)),e===gt&&(49===t.charCodeAt(di)?(e=ii,di++):(e=gt,0===bi&&i(oi))))))),e}function Y(){var t,e;return bi++,t=tt(),t===gt&&(t=et()),bi--,t===gt&&(e=gt,0===bi&&i(ai)),t}function tt(){var e,r,n,o;return e=di,34===t.charCodeAt(di)?(r=nn,di++):(r=gt,0===bi&&i(on)),r!==gt?(n=et(),n!==gt?(34===t.charCodeAt(di)?(o=nn,di++):(o=gt,0===bi&&i(on)),o!==gt?(pi=e,r=Hn(n),e=r):(di=e,e=gt)):(di=e,e=gt)):(di=e,e=gt),e}function et(){var e,r;return e=di,r=V(),r!==gt&&(pi=e,r=ci(r)),e=r,e===gt&&(e=di,t.substr(di,4).toLowerCase()===si?(r=t.substr(di,4),di+=4):(r=gt,0===bi&&i(ui)),r!==gt&&(pi=e,r=li(r)),e=r),e}function rt(t,e){e&&Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]})}function nt(t,e){return t=t?t:{},rt(t,e),t}function it(t){var e={};return t[0].forEach(function(t){e=nt(e,t)}),nt(e,t[1])}function ot(t){return["true","on","1"].indexOf(t.toLowerCase())>-1}function at(t,e){var r={};return r[t.toLowerCase()]=e,r}function ct(t,e,r){return void 0===e||"*"===e?!0:t.entities.some(function(t){return t.name===e})?!0:r[e]===!0}function st(t){var e={};return e.name=t,e}function ut(t,e,r){return t||(t={},t.entities=[]),r||(r={}),e&&e.arcs&&e.arcs.forEach(function(e){e.forEach(function(e){ct(t,e.from,r)||(t.entities[t.entities.length]=st(e.from)),e.arcs&&(r[e.to]=!0,nt(t,ut(t,e,r)),delete r[e.to]),ct(t,e.to,r)||(t.entities[t.entities.length]=st(e.to))})}),t}function lt(t){return t&&t.options?!!t.options.watermark||!!t.options.width&&"auto"===t.options.width:!1}function dt(t){return t&&t.arcs?t.arcs.some(function(t){return t.some(function(t){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(t.kind)>-1})}):!1}function pt(t,e){var r=lt(t),n=dt(e);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}var ft,ht=arguments.length>1?arguments[1]:{},gt={},bt={program:a},mt=a,yt=function(t,e){e[1]=ut(e[1],e[2]);var r=nt(e[0],nt(e[1],e[2]));return r=nt({meta:pt(e[0],e[2])},r),t.length>0&&(r=nt({precomment:t},r)),r},vt=function(t){return{options:t}},xt=function(t){return{entities:t}},wt=function(t){return{arcs:t}},Ct=",",_t={type:"literal",value:",",description:'","'},kt=function(t){return t},At=";",Et={type:"literal",value:";",description:'";"'},Lt=function(t){return it(t)},St="hscale",It={type:"literal",value:"hscale",description:'"hscale"'},jt="arcgradient",Tt={type:"literal",value:"arcgradient",description:'"arcgradient"'},Dt="=",Nt={type:"literal",value:"=",description:'"="'},Bt=function(t,e){return at(t,e)},Ot="width",Ht={type:"literal",value:"width",description:'"width"'},Rt="wordwraparcs",Wt={type:"literal",value:"wordwraparcs",description:'"wordwraparcs"'},Ft=function(t,e){var r={};return r[t.toLowerCase()]=ot(e),r},Mt="watermark",Gt={type:"literal",value:"watermark",description:'"watermark"'},qt=function(t){return t},zt=function(t){return t[0].push(t[1]),t[0]},Ut={type:"other",description:"entity"},Xt=":",Pt={type:"literal",value:":",description:'":"'},Vt=function(t,e){return e},$t=function(t,e){var r={};return r.name=t,e&&(r.label=e),r},Kt=function(t){return t},Zt=function(t){return[t]},Jt=function(t){return t[0].push(t[1][0]),t[0]},Qt=function(t){return t},Yt=function(t){return t},te=function(t){return t},ee=function(t,e){return e},re=function(t,e){return e&&(t.label=e),t},ne=function(t){return{kind:t}},ie=function(t,e,r){return{kind:e,from:t,to:r}},oe="*",ae={type:"literal",value:"*",description:'"*"'},ce=function(t,e){return{kind:t,from:"*",to:e}},se=function(t,e){return{kind:e,from:t,to:"*"}},ue=function(t,e,r,n){return n},le="{",de={type:"literal",value:"{",description:'"{"'},pe="}",fe={type:"literal",value:"}",description:'"}"'},he=function(t,e,r,n,i){var o={kind:e,from:t,to:r,arcs:i};return n&&(o.label=n),o},ge={type:"other",description:"empty row"},be="|||",me={type:"literal",value:"|||",description:'"|||"'},ye="...",ve={type:"literal",value:"...",description:'"..."'},xe={type:"other",description:"---"},we="---",Ce={type:"literal",value:"---",description:'"---"'},_e=function(t){return t.toLowerCase()},ke={type:"other",description:"bi-directional arrow"},Ae="--",Ee={type:"literal",value:"--",description:'"--"'},Le="<->",Se={type:"literal",value:"<->",description:'"<->"'},Ie="==",je={type:"literal",value:"==",description:'"=="'},Te="<<=>>",De={type:"literal",value:"<<=>>",description:'"<<=>>"'},Ne="<=>",Be={type:"literal",value:"<=>",description:'"<=>"'},Oe="..",He={type:"literal",value:"..",description:'".."'},Re="<<>>",We={type:"literal",value:"<<>>",description:'"<<>>"'},Fe="::",Me={type:"literal",value:"::",description:'"::"'},Ge="<:>",qe={type:"literal",value:"<:>",description:'"<:>"'},ze={type:"other",description:"left to right arrow"},Ue="->",Xe={type:"literal",value:"->",description:'"->"'},Pe="=>>",Ve={type:"literal",value:"=>>",description:'"=>>"'},$e="=>",Ke={type:"literal",value:"=>",description:'"=>"'},Ze=">>",Je={type:"literal",value:">>",description:'">>"'},Qe=":>",Ye={type:"literal",value:":>",description:'":>"'},tr="-x",er={type:"literal",value:"-x",description:'"-x"'},rr={type:"other",description:"right to left arrow"},nr="<-",ir={type:"literal",value:"<-",description:'"<-"'},or="<<=",ar={type:"literal",value:"<<=",description:'"<<="'},cr="<=",sr={type:"literal",value:"<=",description:'"<="'},ur="<<",lr={type:"literal",value:"<<",description:'"<<"'},dr="<:",pr={type:"literal",value:"<:",description:'"<:"'},fr="x-",hr={type:"literal",value:"x-",description:'"x-"'},gr={type:"other",description:"box"},br="note",mr={type:"literal",value:"note",description:'"note"'},yr="abox",vr={type:"literal",value:"abox",description:'"abox"'},xr="rbox",wr={type:"literal",value:"rbox",description:'"rbox"'},Cr="box",_r={type:"literal",value:"box",description:'"box"'},kr={type:"other",description:"inline expression"},Ar="alt",Er={type:"literal",value:"alt",description:'"alt"'},Lr="else",Sr={type:"literal",value:"else",description:'"else"'},Ir="opt",jr={type:"literal",value:"opt",description:'"opt"'},Tr="break",Dr={type:"literal",value:"break",description:'"break"'},Nr="par",Br={type:"literal",value:"par",description:'"par"'},Or="seq",Hr={type:"literal",value:"seq",description:'"seq"'},Rr="strict",Wr={type:"literal",value:"strict",description:'"strict"'},Fr="neg",Mr={type:"literal",value:"neg",description:'"neg"'},Gr="critical",qr={type:"literal",value:"critical",description:'"critical"'},zr="ignore",Ur={type:"literal",value:"ignore",description:'"ignore"'},Xr="consider",Pr={type:"literal",value:"consider",description:'"consider"'},Vr="assert",$r={type:"literal",value:"assert",description:'"assert"'},Kr="loop",Zr={type:"literal",value:"loop",description:'"loop"'},Jr="ref",Qr={type:"literal",value:"ref",description:'"ref"'},Yr="exc",tn={type:"literal",value:"exc",description:'"exc"'},en=function(t){return t.toLowerCase()},rn={type:"other",description:"double quoted string"},nn='"',on={type:"literal",value:'"',description:'"\\""'},an=function(t){return t.join("")},cn='\\"',sn={type:"literal",value:'\\"',description:'"\\\\\\""'},un={type:"any",description:"any character"},ln=function(t){return t},dn=function(t){return t.join("").trim()},pn={type:"other",description:"identifier"},fn=/^[^;, "\t\n\r=\-><:{*]/,hn={type:"class",value:'[^;, \\"\\t\\n\\r=\\-><:\\{\\*]',description:'[^;, \\"\\t\\n\\r=\\-><:\\{\\*]'},gn=function(t){return t.join("")},bn={type:"other",description:"whitespace"},mn=/^[ \t]/,yn={type:"class",value:"[ \\t]",description:"[ \\t]"},vn={type:"other",description:"lineend"},xn=/^[\r\n]/,wn={type:"class",value:"[\\r\\n]",description:"[\\r\\n]"},Cn="/*",_n={type:"literal",value:"/*",description:'"/*"'},kn="*/",An={type:"literal",value:"*/",description:'"*/"'},En=function(t,e,r){return t+e.join("")+r},Ln="//",Sn={type:"literal",value:"//",description:'"//"'},In="#",jn={type:"literal",value:"#",description:'"#"'},Tn=/^[^\r\n]/,Dn={type:"class",value:"[^\\r\\n]",description:"[^\\r\\n]"},Nn=function(t,e){return t+e.join("")},Bn={type:"other",description:"comment"},On={type:"other",description:"number"},Hn=function(t){return t},Rn=function(t){return t.toString()},Wn=function(t){return t.toString()},Fn=/^[0-9]/,Mn={type:"class",value:"[0-9]",description:"[0-9]"},Gn=function(t){return parseInt(t.join(""),10)},qn=".",zn={type:"literal",value:".",description:'"."'},Un=function(t){return parseFloat(t.join(""))},Xn={type:"other",description:"boolean"},Pn=function(t){return t},Vn=function(t){return t.toString()},$n="true",Kn={type:"literal",value:"true",description:'"true"'},Zn="false",Jn={type:"literal",value:"false",description:'"false"'},Qn="on",Yn={type:"literal",value:"on",description:'"on"'},ti="off",ei={type:"literal",value:"off",description:'"off"'},ri="0",ni={type:"literal",value:"0",description:'"0"'},ii="1",oi={type:"literal",value:"1",description:'"1"'},ai={type:"other",description:"size"},ci=function(t){return t.toString()},si="auto",ui={type:"literal",value:"auto",description:'"auto"'},li=function(t){return t.toLowerCase()},di=0,pi=0,fi=[{line:1,column:1,seenCR:!1}],hi=0,gi=[],bi=0;if("startRule"in ht){if(!(ht.startRule in bt))throw new Error("Can't start parsing from rule \""+ht.startRule+'".');mt=bt[ht.startRule]}if(ft=mt(),ft!==gt&&di===t.length)return ft;throw ft!==gt&&di<t.length&&i({type:"end",description:"end of input"}),o(null,gi,hi<t.length?t.charAt(hi):null,hi<t.length?n(hi,hi+1):n(hi,hi))}return t(e,Error),{SyntaxError:e,parse:r}}),r("lib/mscgenjs-core/render/graphics/constants",[],function(){"use strict";return{SVGNS:"http://www.w3.org/2000/svg",XLINKNS:"http://www.w3.org/1999/xlink",LINE_WIDTH:2,FONT_SIZE:12}}),r("lib/mscgenjs-core/render/graphics/svglowlevelfactory",["./constants"],function(t){"use strict";function e(t,e,r){return r&&t.setAttribute(e,r),t}function r(t,r){return r&&Object.keys(r).forEach(function(n){e(t,n,r[n])}),t}function n(e,n){return r(i.createElementNS(t.SVGNS,e),n)}var i={};return{init:function(t){i=t},setAttribute:e,setAttributes:r,createElement:n}}),r("lib/mscgenjs-core/render/graphics/geometry",[],function(){"use strict";function t(t){return 360*t/(2*Math.PI)}function e(e){return 0-t(Math.atan(e.height/e.width))}function r(t){var e=-1;return t.xTo>t.xFrom&&(e=1),{dx:e,dy:e*(t.yTo-t.yFrom)/(t.xTo-t.xFrom)}}return{getDiagonalAngle:e,getDirection:r}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory",["./constants","./svglowlevelfactory","./geometry"],function(t,e,r){"use strict";function n(t,r,n,i){return o(e.createElement("path",{d:t,"class":r}),n,i)}function i(t,r){return e.createElement("polygon",{points:t,"class":r})}function o(t,r,n){var i="";return n&&(i+="fill:"+n+";"),r&&(i+="stroke:"+r+";"),e.setAttribute(t,"style",i)}function a(t,r){return e.createElement("line",{x1:t.xFrom.toString(),y1:t.yFrom.toString(),x2:t.xTo.toString(),y2:t.yTo.toString(),"class":r})}function c(e,r){var n=h.createElementNS(t.SVGNS,"a");return n.setAttributeNS(t.XLINKNS,"xlink:href",e),n.setAttributeNS(t.XLINKNS,"xlink:title",e),n.setAttributeNS(t.XLINKNS,"xlink:show","new"),n.appendChild(r),n}function s(e,r){var n=h.createElementNS(t.SVGNS,"tspan"),i=h.createTextNode(e);return n.appendChild(i),r?c(r,n):n}function u(t,r,n,i,o,a){var c=e.createElement("text",{x:r.x.toString(),y:r.y.toString(),
"class":n});if(c.appendChild(s(t,i)),o){var u=s(" ["+o+"]",a);u.setAttribute("style",g),c.appendChild(u)}return c}function l(e,r){var n=0;return r.indexOf("nodi")<0&&(n=e.xTo>e.xFrom?-7.5*t.LINE_WIDTH:7.5*t.LINE_WIDTH),n}function d(e,r){var n=0;return r.indexOf("nodi")<0&&r.indexOf("bidi")>-1&&(n=e.xTo>e.xFrom?7.5*t.LINE_WIDTH:-7.5*t.LINE_WIDTH),n}function p(e,i){var o=t.LINE_WIDTH,a=r.getDirection(e),c=l(e,i),s=d(e,i),u=(e.xTo-e.xFrom+c-s).toString(),p=(e.yTo-e.yFrom).toString(),f="l"+a.dx.toString()+","+a.dy.toString(),h=" l"+u+","+p;return n("M"+e.xFrom.toString()+","+(e.yFrom-7.5*t.LINE_WIDTH*a.dy).toString()+f+"M"+(e.xFrom+s).toString()+","+(e.yFrom-o).toString()+h+"M"+(e.xFrom+s).toString()+","+(e.yFrom+o).toString()+h+"M"+(e.xTo-a.dx).toString()+","+(e.yTo+7.5*t.LINE_WIDTH*a.dy).toString()+f,i)}function f(t,r,n,i){return e.createElement("marker",{orient:n,id:t,"class":r,viewBox:Boolean(i)?i:"0 0 10 10",refX:"9",refY:"3",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10"})}var h={},g="vertical-align:text-top;";return g+="font-size:0.7em;text-anchor:start;",{init:function(t){h=t,e.init(t)},createSVG:function(r,n){return e.createElement("svg",{version:"1.1",id:r,"class":n,xmlns:t.SVGNS,"xmlns:xlink":t.XLINKNS,width:"0",height:"0"})},createDesc:function(t){return e.createElement("desc",{id:t})},createDefs:function(){return e.createElement("defs")},createRect:function(t,r,n,i){return o(e.createElement("rect",{width:t.width,height:t.height,x:t.x,y:t.y,"class":r}),n,i)},createRBox:function(t,r,n,i){var a=6;return o(e.createElement("rect",{width:t.width,height:t.height,x:t.x,y:t.y,rx:a,ry:a,"class":r}),n,i)},createABox:function(t,e,r,i){var o=3;return n("M"+t.x+","+(t.y+t.height/2)+"l"+o+", -"+t.height/2+"l"+(t.width-2*o)+",0l"+o+","+t.height/2+"l-"+o+","+t.height/2+"l-"+(t.width-2*o)+",0 l-"+o+",-"+t.height/2,e,r,i)},createNote:function(e,r,i,o){var a=Math.max(9,Math.min(4.5*t.LINE_WIDTH,e.height/2)),c=a.toString(10);return n("M"+e.x+","+e.y+"l"+(e.width-a)+",0 l0,"+c+" l"+c+",0 m-"+c+",-"+c+" l"+c+","+c+" l0,"+(e.height-a)+" l-"+e.width+",0 l0,-"+(e.height+t.LINE_WIDTH/2)+" ",r,i,o)},createEdgeRemark:function(t,e,r,i,o){var a=o?o:7;return n("M"+t.x+","+t.y+" l"+t.width+",0  l0,"+(t.height-a)+" l-"+a.toString(10)+","+a.toString(10)+" l-"+(t.width-a)+",0 ",e,r,i)},createText:u,createDiagonalText:function(t,n,i){return e.setAttributes(u(t,{x:n.width/2,y:n.height/2},i),{transform:"rotate("+r.getDiagonalAngle(n).toString()+" "+(n.width/2).toString()+" "+(n.height/2).toString()+")"})},createLine:function(t,e,r){return Boolean(r)?p(t,e):a(t,e)},createUTurn:function(e,r,i,o,a){var c=a?e.x+7.5*t.LINE_WIDTH:e.x;return n("M"+e.x.toString()+", -"+e.y.toString()+" C"+(e.x+i).toString()+","+(e.y-7.5*t.LINE_WIDTH).toString()+" "+(e.x+i).toString()+","+(r+0).toString()+" "+c.toString()+","+r.toString(),o)},createGroup:function(t,r){return e.createElement("g",{id:t,"class":r})},createUse:function(r,n){var i=e.createElement("use",{x:r.x.toString(),y:r.y.toString()});return i.setAttributeNS(t.XLINKNS,"xlink:href","#"+n),i},createMarkerPath:function(t,r,i){var o=f(t,"arrow-marker","auto");return o.appendChild(e.setAttributes(n(r,"arrow-style"),{style:"stroke-dasharray:100,1;stroke:"+i||"black"})),o},createMarkerPolygon:function(t,r,n){var o=f(t,"arrow-marker","auto");return o.appendChild(e.setAttributes(i(r,"arrow-style"),{stroke:n||"black",fill:n||"black"})),o}}}),r("lib/mscgenjs-core/render/graphics/idmanager",[],function(){"use strict";var t="mscgen_js-svg-",e=t;return{setPrefix:function(r){e=t+r},get:function(t){return t?e+t:e}}}),function(){function t(t,e){return t.set(e[0],e[1]),t}function e(t,e){return t.add(e),t}function n(t,e,r){var n=r.length;switch(n){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function i(t,e){for(var r=-1,n=t?t.length:0;++r<n&&e(t[r],r,t)!==!1;);return t}function o(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function a(t,e,r,n){var i=-1,o=t?t.length:0;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function c(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function s(t){return t&&t.Object===Object?t:null}function u(t,e){return null==t?$t:t[e]}function l(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(r){}return e}function d(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}function p(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function f(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function h(){}function g(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function b(){this.__data__=yr?yr(null):{}}function m(t){return this.has(t)&&delete this.__data__[t]}function y(t){var e=this.__data__;if(yr){var r=e[t];return r===Qt?$t:r}return Qe.call(e,t)?e[t]:$t}function v(t){var e=this.__data__;return yr?e[t]!==$t:Qe.call(e,t)}function x(t,e){var r=this.__data__;return r[t]=yr&&e===$t?Qt:e,this}function w(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function C(){this.__data__=[]}function _(t){var e=this.__data__,r=G(e,t);if(0>r)return!1;var n=e.length-1;return r==n?e.pop():ur.call(e,r,1),!0}function k(t){var e=this.__data__,r=G(e,t);return 0>r?$t:e[r][1]}function A(t){return G(this.__data__,t)>-1}function E(t,e){var r=this.__data__,n=G(r,t);return 0>n?r.push([t,e]):r[n][1]=e,this}function L(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function S(){this.__data__={hash:new g,map:new(hr||w),string:new g}}function I(t){return dt(this,t)["delete"](t)}function j(t){return dt(this,t).get(t)}function T(t){return dt(this,t).has(t)}function D(t,e){return dt(this,t).set(t,e),this}function N(t){this.__data__=new w(t)}function B(){this.__data__=new w}function O(t){return this.__data__["delete"](t)}function H(t){return this.__data__.get(t)}function R(t){return this.__data__.has(t)}function W(t,e){var r=this.__data__;return r instanceof w&&r.__data__.length==Zt&&(r=this.__data__=new L(r.__data__)),r.set(t,e),this}function F(t,e,r,n){return t===$t||Tt(t,$e[r])&&!Qe.call(n,r)?e:t}function M(t,e,r){var n=t[e];Qe.call(t,e)&&Tt(n,r)&&(r!==$t||e in t)||(t[e]=r)}function G(t,e){for(var r=t.length;r--;)if(Tt(t[r][0],e))return r;return-1}function q(t,e){return t&&ct(e,Ut(e),t)}function z(t,e,r,n,o,a,c){var s;if(n&&(s=a?n(t,o,a,c):n(t)),s!==$t)return s;if(!Rt(t))return t;var u=Lr(t);if(u){if(s=bt(t),!e)return at(t,s)}else{var d=gt(t),p=d==se||d==ue;if(Sr(t))return Q(t,e);if(d==pe||d==ne||p&&!a){if(l(t))return a?t:{};if(s=mt(p?{}:t),!e)return st(t,q(s,t))}else{if(!We[d])return a?t:{};s=yt(t,d,z,e)}}c||(c=new N);var f=c.get(t);if(f)return f;if(c.set(t,s),!u)var h=r?lt(t):Ut(t);return i(h||t,function(i,o){h&&(o=i,i=t[o]),M(s,o,z(i,e,r,n,o,t,c))}),s}function U(t){return Rt(t)?cr(t):{}}function X(t,e,r,n,i){var a=-1,c=t.length;for(r||(r=xt),i||(i=[]);++a<c;){var s=t[a];e>0&&r(s)?e>1?X(s,e-1,r,n,i):o(i,s):n||(i[i.length]=s)}return i}function P(t,e,r){var n=e(t);return Lr(t)?n:o(n,r(t))}function V(t,e){return null!=t&&(Qe.call(t,e)||"object"==typeof t&&e in t&&null===ft(t))}function $(t){if(!Rt(t)||kt(t))return!1;var e=Ot(t)||l(t)?tr:Oe;return e.test(Et(t))}function K(t){return dr(Object(t))}function Z(t){t=null==t?t:Object(t);var e=[];for(var r in t)e.push(r);return e}function J(t){return function(e){return null==e?$t:e[t]}}function Q(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}function Y(t){var e=new t.constructor(t.byteLength);return new ir(e).set(new ir(t)),e}function tt(t,e){var r=e?Y(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function et(e,r,n){var i=r?n(p(e),!0):p(e);return a(i,t,new e.constructor)}function rt(t){var e=new t.constructor(t.source,De.exec(t));return e.lastIndex=t.lastIndex,e}function nt(t,r,n){var i=r?n(f(t),!0):f(t);return a(i,e,new t.constructor)}function it(t){return Ar?Object(Ar.call(t)):{}}function ot(t,e){var r=e?Y(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function at(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function ct(t,e,r,n){r||(r={});for(var i=-1,o=e.length;++i<o;){var a=e[i],c=n?n(r[a],t[a],a,r,t):t[a];M(r,a,c)}return r}function st(t,e){return ct(t,ht(t),e)}function ut(t){return It(function(e,r){var n=-1,i=r.length,o=i>1?r[i-1]:$t,a=i>2?r[2]:$t;for(o=t.length>3&&"function"==typeof o?(i--,o):$t,a&&Ct(r[0],r[1],a)&&(o=3>i?$t:o,i=1),e=Object(e);++n<i;){var c=r[n];c&&t(e,c,n,o)}return e})}function lt(t){return P(t,Ut,ht)}function dt(t,e){var r=t.__data__;return _t(e)?r["string"==typeof e?"string":"hash"]:r.map}function pt(t,e){var r=u(t,e);return $(r)?r:$t}function ft(t){return lr(Object(t))}function ht(t){return ar(Object(t))}function gt(t){return Ye.call(t)}function bt(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&Qe.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function mt(t){return"function"!=typeof t.constructor||At(t)?{}:U(ft(t))}function yt(t,e,r,n){var i=t.constructor;switch(e){case ve:return Y(t);case oe:case ae:return new i(+t);case xe:return tt(t,n);case we:case Ce:case _e:case ke:case Ae:case Ee:case Le:case Se:case Ie:return ot(t,n);case le:return et(t,n,r);case de:case be:return new i(t);case he:return rt(t);case ge:return nt(t,n,r);case me:return it(t)}}function vt(t){var e=t?t.length:$t;return Ht(e)&&(Lr(t)||Ft(t)||Dt(t))?c(e,String):null}function xt(t){return Lr(t)||Dt(t)}function wt(t,e){return e=null==e?te:e,!!e&&("number"==typeof t||Re.test(t))&&t>-1&&t%1==0&&e>t}function Ct(t,e,r){if(!Rt(r))return!1;var n=typeof e;return("number"==n?Nt(r)&&wt(e,r.length):"string"==n&&e in r)?Tt(r[e],t):!1}function _t(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function kt(t){return!!Ze&&Ze in t}function At(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||$e;return t===r}function Et(t){if(null!=t){try{return Je.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Lt(t){var e=t?t.length:0;return e?X(t,1):[]}function St(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(Jt);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a),a};return r.cache=new(St.Cache||L),r}function It(t,e){if("function"!=typeof t)throw new TypeError(Jt);return e=pr(e===$t?t.length-1:qt(e),0),function(){for(var r=arguments,i=-1,o=pr(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,r[0],a);case 2:return t.call(this,r[0],r[1],a)}var c=Array(e+1);for(i=-1;++i<e;)c[i]=r[i];return c[e]=a,n(t,this,c)}}function jt(t){return z(t,!0,!0)}function Tt(t,e){return t===e||t!==t&&e!==e}function Dt(t){return Bt(t)&&Qe.call(t,"callee")&&(!sr.call(t,"callee")||Ye.call(t)==ne)}function Nt(t){return null!=t&&Ht(Er(t))&&!Ot(t)}function Bt(t){return Wt(t)&&Nt(t)}function Ot(t){var e=Rt(t)?Ye.call(t):"";return e==se||e==ue}function Ht(t){return"number"==typeof t&&t>-1&&t%1==0&&te>=t}function Rt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Wt(t){return!!t&&"object"==typeof t}function Ft(t){return"string"==typeof t||!Lr(t)&&Wt(t)&&Ye.call(t)==be}function Mt(t){return"symbol"==typeof t||Wt(t)&&Ye.call(t)==me}function Gt(t){if(!t)return 0===t?t:0;if(t=zt(t),t===Yt||t===-Yt){var e=0>t?-1:1;return e*ee}return t===t?t:0}function qt(t){var e=Gt(t),r=e%1;return e===e?r?e-r:e:0}function zt(t){if("number"==typeof t)return t;if(Mt(t))return re;if(Rt(t)){var e=Ot(t.valueOf)?t.valueOf():t;t=Rt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Te,"");var r=Be.test(t);return r||He.test(t)?Fe(t.slice(2),r?2:8):Ne.test(t)?re:+t}function Ut(t){var e=At(t);if(!e&&!Nt(t))return K(t);var r=vt(t),n=!!r,i=r||[],o=i.length;for(var a in t)!V(t,a)||n&&("length"==a||wt(a,o))||e&&"constructor"==a||i.push(a);return i}function Xt(t){for(var e=-1,r=At(t),n=Z(t),i=n.length,o=vt(t),a=!!o,c=o||[],s=c.length;++e<i;){var u=n[e];a&&("length"==u||wt(u,s))||"constructor"==u&&(r||!Qe.call(t,u))||c.push(u)}return c}function Pt(){return[]}function Vt(){return!1}var $t,Kt="4.13.1",Zt=200,Jt="Expected a function",Qt="__lodash_hash_undefined__",Yt=1/0,te=9007199254740991,ee=1.7976931348623157e308,re=NaN,ne="[object Arguments]",ie="[object Array]",oe="[object Boolean]",ae="[object Date]",ce="[object Error]",se="[object Function]",ue="[object GeneratorFunction]",le="[object Map]",de="[object Number]",pe="[object Object]",fe="[object Promise]",he="[object RegExp]",ge="[object Set]",be="[object String]",me="[object Symbol]",ye="[object WeakMap]",ve="[object ArrayBuffer]",xe="[object DataView]",we="[object Float32Array]",Ce="[object Float64Array]",_e="[object Int8Array]",ke="[object Int16Array]",Ae="[object Int32Array]",Ee="[object Uint8Array]",Le="[object Uint8ClampedArray]",Se="[object Uint16Array]",Ie="[object Uint32Array]",je=/[\\^$.*+?()[\]{}|]/g,Te=/^\s+|\s+$/g,De=/\w*$/,Ne=/^[-+]0x[0-9a-f]+$/i,Be=/^0b[01]+$/i,Oe=/^\[object .+?Constructor\]$/,He=/^0o[0-7]+$/i,Re=/^(?:0|[1-9]\d*)$/,We={};We[ne]=We[ie]=We[ve]=We[xe]=We[oe]=We[ae]=We[we]=We[Ce]=We[_e]=We[ke]=We[Ae]=We[le]=We[de]=We[pe]=We[he]=We[ge]=We[be]=We[me]=We[Ee]=We[Le]=We[Se]=We[Ie]=!0,We[ce]=We[se]=We[ye]=!1;var Fe=parseInt,Me="object"==typeof exports&&exports,Ge=Me&&"object"==typeof module&&module,qe=Ge&&Ge.exports===Me,ze=s("object"==typeof global&&global),Ue=s("object"==typeof self&&self),Xe=s("object"==typeof this&&this),Pe=ze||Ue||Xe||Function("return this")(),Ve=Array.prototype,$e=Object.prototype,Ke=Pe["__core-js_shared__"],Ze=function(){var t=/[^.]+$/.exec(Ke&&Ke.keys&&Ke.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Je=Function.prototype.toString,Qe=$e.hasOwnProperty,Ye=$e.toString,tr=RegExp("^"+Je.call(Qe).replace(je,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),er=qe?Pe.Buffer:$t,rr=Pe.Reflect,nr=Pe.Symbol,ir=Pe.Uint8Array,or=rr?rr.enumerate:$t,ar=Object.getOwnPropertySymbols,cr=Object.create,sr=$e.propertyIsEnumerable,ur=Ve.splice,lr=Object.getPrototypeOf,dr=Object.keys,pr=Math.max,fr=pt(Pe,"DataView"),hr=pt(Pe,"Map"),gr=pt(Pe,"Promise"),br=pt(Pe,"Set"),mr=pt(Pe,"WeakMap"),yr=pt(Object,"create"),vr=Et(fr),xr=Et(hr),wr=Et(gr),Cr=Et(br),_r=Et(mr),kr=nr?nr.prototype:$t,Ar=kr?kr.valueOf:$t;g.prototype.clear=b,g.prototype["delete"]=m,g.prototype.get=y,g.prototype.has=v,g.prototype.set=x,w.prototype.clear=C,w.prototype["delete"]=_,w.prototype.get=k,w.prototype.has=A,w.prototype.set=E,L.prototype.clear=S,L.prototype["delete"]=I,L.prototype.get=j,L.prototype.has=T,L.prototype.set=D,N.prototype.clear=B,N.prototype["delete"]=O,N.prototype.get=H,N.prototype.has=R,N.prototype.set=W,or&&!sr.call({valueOf:1},"valueOf")&&(Z=function(t){return d(or(t))});var Er=J("length");ar||(ht=Pt),(fr&&gt(new fr(new ArrayBuffer(1)))!=xe||hr&&gt(new hr)!=le||gr&&gt(gr.resolve())!=fe||br&&gt(new br)!=ge||mr&&gt(new mr)!=ye)&&(gt=function(t){var e=Ye.call(t),r=e==pe?t.constructor:$t,n=r?Et(r):$t;if(n)switch(n){case vr:return xe;case xr:return le;case wr:return fe;case Cr:return ge;case _r:return ye}return e}),St.Cache=L;var Lr=Array.isArray,Sr=er?function(t){return t instanceof er}:Vt,Ir=ut(function(t,e,r,n){ct(e,Xt(e),t,n)}),jr=It(function(t){return t.push($t,F),n(Ir,$t,t)});h.assignInWith=Ir,h.defaults=jr,h.flatten=Lt,h.keys=Ut,h.keysIn=Xt,h.memoize=St,h.rest=It,h.extendWith=Ir,h.cloneDeep=jt,h.eq=Tt,h.isArguments=Dt,h.isArray=Lr,h.isArrayLike=Nt,h.isArrayLikeObject=Bt,h.isBuffer=Sr,h.isFunction=Ot,h.isLength=Ht,h.isObject=Rt,h.isObjectLike=Wt,h.isString=Ft,h.isSymbol=Mt,h.stubArray=Pt,h.stubFalse=Vt,h.toFinite=Gt,h.toInteger=qt,h.toNumber=zt,h.VERSION=Kt,(Ue||{})._=h,"function"==typeof r&&"object"==typeof r.amd&&r.amd?r("lib/mscgenjs-core/lib/lodash/lodash.custom",[],function(){return h}):Ge?((Ge.exports=h)._=h,Me._=h):Pe._=h}.call(this),r("lib/mscgenjs-core/render/graphics/svgutensils",["./constants","./idmanager","./svgelementfactory","./svglowlevelfactory","../../lib/lodash/lodash.custom"],function(t,e,r,n,i){"use strict";function o(t){var n=r.createSVG(t,e.get());return f.body.appendChild(n),n}function a(t){var e=f.getElementById(h);e=e?e:o(h),e.appendChild(t);var r=t.getBBox();return e.removeChild(t),r}function c(t){var e=1e5;return Math.abs(t.height)>e||Math.abs(t.width)>e?{height:0,width:0,x:0,y:0}:t}function s(t){return"function"==typeof t.getBBox?c(a(t)):{height:15,width:15,x:2,y:2}}function u(e){var r=f.createElementNS(t.SVGNS,"tspan");return r.appendChild(f.createTextNode(e)),r}function l(t){var e=n.createElement("text",{x:"0",y:"0"});return e.appendChild(u(t)),e}function d(){return s(l("ÁjyÎ9ƒ@💩")).height}function p(t){e.setPrefix(t);var r=f.getElementById(e.get());if(r){var n=f.getElementById(t);n?n.removeChild(r):f.body.removeChild(r)}}var f={},h=e.get("bboxer");return{init:function(t){f=t},removeRenderedSVGFromElement:p,getBBox:s,calculateTextHeight:i.memoize(d),webkitNamespaceBugWorkaround:function(t){return t.replace(/ xlink=/g," xmlns:xlink=","g").replace(/ href=/g," xlink:href=","g")}}}),r("lib/mscgenjs-core/render/graphics/renderutensils",[],function(){"use strict";function t(t,e){e.scale=t/e.width,e.width*=e.scale,e.height*=e.scale,e.horizontaltransform*=e.scale,e.verticaltransform*=e.scale,e.x=0-e.horizontaltransform,e.y=0-e.verticaltransform}function e(t,e){return t?2*(2*(t+1)*e):0}function r(t,e,r){return"-x"===t?e+.75*(r-e):r}return{scaleCanvasToWidth:t,determineDepthCorrection:e,determineArcXTo:r}}),r("lib/mscgenjs-core/render/graphics/csstemplates",[],function(){"use strict";return{baseTemplate:"svg.<%=id%>{font-family:Helvetica,sans-serif;font-size:<%=fontSize%>px;font-weight:normal;font-style:normal;text-decoration:none;background-color:white;stroke:black;stroke-width:<%=lineWidth%>;color:black;}.<%=id%> rect{fill:none;stroke:black;}.<%=id%> rect.entity{fill:white;}.<%=id%> rect.label-text-background{fill:white;stroke:white;stroke-width:0;}.<%=id%> rect.bglayer{fill:white;stroke:white;stroke-width:0;}.<%=id%> line{stroke:black;}.<%=id%> line.return, .<%=id%> path.return{stroke-dasharray:5,2;}.<%=id%> line.comment{stroke-dasharray:5,2;}.<%=id%> line.inline_expression_divider{stroke-dasharray:10,5;}.<%=id%> text{color:inherit;stroke:none;text-anchor:middle;}.<%=id%> text.entity-text{text-decoration:underline;}.<%=id%> text.anchor-start{text-anchor:start;}.<%=id%> path{stroke:black;color:black;fill:none;}.<%=id%> .arrow-marker{overflow:visible;}.<%=id%> .arrow-style{stroke-width:1;}.<%=id%> .arcrowomit{stroke-dasharray:2,2;}.<%=id%> rect.box, .<%=id%> path.box{fill:white;}.<%=id%> .inherit{stroke:inherit;color:inherit;}.<%=id%> .inherit-fill{fill:inherit;}.<%=id%> .watermark{stroke:black;color:black;fill:black;font-size:48pt;font-weight:bold;opacity:0.14;}",additionalTemplates:[{name:"classic",css:".<%=id%> text.entity-text{text-decoration:none}.<%=id%> rect.entity{stroke:none;}.<%=id%> line,.<%=id%> rect,.<%=id%> path{stroke-width:1px}.<%=id%> .arrow-style{stroke-width:2;}.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke-width: 1px}"},{name:"cygne",css:".<%=id%> line{stroke:#00A1DE}.<%=id%> text{fill:#005B82}.<%=id%> rect.entity,.<%=id%> rect.box,.<%=id%> path.box{fill:#00A1DE;stroke:#00A1DE}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#E77B2F;stroke:white}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> path.inline_expression_label{fill:white}"},{name:"grayscaled",css:"svg.<%=id%>{filter:grayscale(1);-webkit-filter:grayscale(1);}"},{name:"inverted",css:"svg.<%=id%>{filter:invert(1);-webkit-filter:invert(1);}"},{name:"lazy",css:".<%=id%> text.entity-text{font-weight:bold;text-decoration:none;}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC}.<%=id%> rect.label-text-background{opacity:0.9}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke:grey}"},{name:"pegasse",css:".<%=id%> line{stroke:rgba(0, 43, 84, 1)}.<%=id%> text{fill:rgba(0, 43, 84, 1)}.<%=id%> rect.entity,.<%=id%> rect.box,.<%=id%> path.box{fill:rgba(0, 43, 84, 1);stroke:rgba(0, 43, 84, 1)}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:rgba(255, 50, 0, 1);stroke:white}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> path.inline_expression_label{fill:white}"}]}}),r("lib/mscgenjs-core/render/graphics/renderskeleton",["./svgelementfactory","./constants","./csstemplates"],function(t,e,r){"use strict";function n(e,r){return r.forEach(function(r){"method"===r.type?e.appendChild(t.createMarkerPolygon(r.name,r.path,r.color)):e.appendChild(t.createMarkerPath(r.name,r.path,r.color))}),e}function i(t,e){var r=p.createElement("style");return r.setAttribute("type","text/css"),r.appendChild(p.createTextNode(d(t,e))),r}function o(e,r,o){var a=t.createDefs();return a.appendChild(i(o,e)),a=n(a,r),a.appendChild(t.createGroup(e+"__defs")),a}function a(e){var r=t.createGroup(e+"__body");return r.appendChild(t.createGroup(e+"__background")),r.appendChild(t.createGroup(e+"__arcspanlayer")),r.appendChild(t.createGroup(e+"__lifelinelayer")),r.appendChild(t.createGroup(e+"__sequencelayer")),r.appendChild(t.createGroup(e+"__notelayer")),r.appendChild(t.createGroup(e+"__watermark")),r}function c(e){return t.init(e.document),e.document}function s(e,r,n,i,s){p=c(e);var l=p.getElementById(r);null===l&&(l=p.body);var d=t.createSVG(n,n);return d.appendChild(u(e,n,s.source)),d.appendChild(o(n,i,s)),d.appendChild(a(n)),l.appendChild(d),p}function u(e,r,n){var i=t.createDesc(r+"__msc_source");return Boolean(n)&&i.appendChild(e.document.createTextNode("\n\n# Generated by mscgen_js - https://sverweij.github.io/mscgen_js\n"+n)),i}function l(t){var e="",n=[];return Boolean(t)?(Boolean(t.additionalTemplate)&&(n=r.additionalTemplates.filter(function(e){return e.name===t.additionalTemplate}),n.length>0&&(e=n[0].css)),Boolean(t.styleAdditions)&&(e+=t.styleAdditions),e):""}function d(t,n){return(r.baseTemplate+l(t)).replace(/<%=fontSize%>/g,e.FONT_SIZE).replace(/<%=lineWidth%>/g,e.LINE_WIDTH).replace(/<%=id%>/g,n)}var p={};return{bootstrap:s,init:c}}),r("lib/mscgenjs-core/render/text/asttransform",[],function(){"use strict";function t(t,e){t&&e&&t.forEach(function(t){e.forEach(function(e){e(t)})})}function e(t,e,r,n){n&&n.forEach(function(n){n(r,t,e)})}function r(t,r,i){r.forEach(function(o){e(t,r,o,i),o.arcs&&n(t,o.arcs,i)})}function n(t,e,n){t&&e&&n&&e.forEach(function(e){r(t,e,n)})}function i(e,r,i){return t(e.entities,r),n(e.entities,e.arcs,i),e}return{transform:i}}),r("lib/mscgenjs-core/render/text/arcmappings",[],function(){"use strict";var t={"->":"rvee","<->":"rvee","=>":"normal","<=>":"normal","-x":"oinvonormal"},e={box:"box",abox:"hexagon",rbox:"box",note:"note"},r={">>":"dashed","<<>>":"dashed","..":"dashed",":>":"bold","<:>":"bold","::":"bold",rbox:"rounded"},n={"|||":"emptyarc","...":"emptyarc","---":"emptyarc","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression","else":"inline_expression",opt:"inline_expression","break":"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"},i={"<-":"->","<=":"=>","<<=":"=>>","<<":">>","<:":":>","x-":"-x"},o={"|||":"empty-row","...":"omitted-row","---":"comment-row","->":"signal","=>":"method","=>>":"callback",">>":"return",":>":"emphasised","-x":"lost","<-":"signal","<=":"method","<<=":"callback","<<":"return","<:":"emphasised","x-":"lost","<->":"signal","<=>":"method","<<=>>":"callback","<<>>":"return","<:>":"emphasised","--":"signal","==":"method","..":"return","::":"emphasised"},a={"|||":"empty","...":"empty","---":"empty","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression","else":"inline_expression",opt:"inline_expression","break":"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"};return{getArrow:function(e){return t[e]},getShape:function(t){return e[t]},getStyle:function(t){return r[t]},getAggregate:function(t){return n[t]},getClass:function(t){return o[t]||t},getAggregateClass:function(t){return a[t]||t},getNormalizedKind:function(t){return i[t]||t}}}),r("lib/mscgenjs-core/render/text/textutensils",[],function(){"use strict";return{wrap:function(t,e){for(var r=0,n=[],i=0,o=0,a=0,c=0,s=t.replace(/[\t\n]+/g," ").replace(/\\n/g,"\n");c<=s.length;)c>=s.length?n.push(s.substring(i,c)):"\n"===s[c]?(r=0,a=c,n.push(s.substring(i,a)),i=a+1):r++>=e&&(a=s.substring(0,c).lastIndexOf(" "),-1===a||i>a?(r=1,a=c,o=c):(r=0,o=a+1),n.push(s.substring(i,a)),i=o),c++;return n},unescapeString:function(t){return t.replace(/\\"/g,'"')},escapeString:function(t){return t.replace(/\\"/g,'"').replace(/"/g,'\\"')}}}),r("lib/mscgenjs-core/render/text/flatten",["./asttransform","./arcmappings","../../lib/lodash/lodash.custom","./textutensils"],function(t,e,r,n){"use strict";function i(t){"undefined"==typeof t.label&&(t.label=t.name)}function o(t){Boolean(t.label)&&(t.label=n.unescapeString(t.label)),Boolean(t.id)&&(t.id=n.unescapeString(t.id))}function a(t){t.label=Boolean(t.label)?t.label:""}function c(t){if(t.kind&&e.getNormalizedKind(t.kind)!==t.kind){t.kind=e.getNormalizedKind(t.kind);var r=t.from;t.from=t.to,t.to=r}return t}function s(t,e){!t.linecolor&&e.arclinecolor&&(t.linecolor=e.arclinecolor),!t.textcolor&&e.arctextcolor&&(t.textcolor=e.arctextcolor),!t.textbgcolor&&e.arctextbgcolor&&(t.textbgcolor=e.arctextbgcolor)}function u(t,e){if(t&&t.from){var r=e.filter(function(e){return e.name===t.from});r.length>0&&s(t,r[0])}}function l(t){return t.arcs.reduce(function(t,e){return t+(Boolean(e[0].arcs)?l(e[0])+1:0)},t.arcs.length)}function d(t,n,i,o){var a=[],c=[],u=[];return t.forEach(function(t){if("inline_expression"===e.getAggregate(t.kind)){if(t.depth=n,Boolean(t.arcs)){var a=r.cloneDeep(t);a.numberofrows=l(a),delete a.arcs,c.push(a),t.arcs.forEach(function(t){u=u.concat(d(t,n+1,a.from,a.to)),t.forEach(function(t){s(t,a)})}),n>g&&(g=n)}else c.push(t);u.push([{kind:"|||",from:t.from,to:t.to}])}else i&&o&&"emptyarc"===e.getAggregate(t.kind)&&(t.from=i,t.to=o,t.depth=n),c.push(t)}),a.push(c),a.concat(u)}function p(t){var e={};return g=0,Boolean(t.options)&&(e.options=r.cloneDeep(t.options)),Boolean(t.entities)&&(e.entities=r.cloneDeep(t.entities)),e.arcs=[],t&&t.arcs&&t.arcs.forEach(function(t){d(t,0).forEach(function(t){e.arcs.push(t)})}),e.depth=g+1,e}function f(t,e){return t.filter(function(t){return e.from!==t.name}).map(function(t){return e.to=t.name,r.cloneDeep(e)})}function h(t){if(t.entities&&t.arcs){var e=[],n={};t.arcs.forEach(function(i,o){i.filter(function(t){return"*"===t.to}).forEach(function(a,c){n=r.cloneDeep(a),delete t.arcs[o][c],e=f(t.entities,n),i[c]=e.shift(),t.arcs[o]=i.concat(e)})})}return t}var g=0;return{swapRTLArc:c,unwind:p,explodeBroadcasts:h,flatten:function(e){return t.transform(p(e),[i,o],[c,u,o,a])},dotFlatten:function(e){return h(t.transform(e,[i],[c,u]))}}}),r("lib/mscgenjs-core/render/graphics/rowmemory",[],function(){"use strict";function t(t,e){i=[],o=t,a=e}function e(t){return i[t]?i[t]:{y:o+1.5*a+t*a,height:a}}function r(){return e(i.length-1)}function n(t,r,n){if(("undefined"==typeof r||a>r)&&(r=a),"undefined"==typeof n){var o=e(t-1);o&&o.y>0&&(n=o.y+(o.height+r)/2)}i[t]={y:n,height:r}}var i=[],o=0,a=0;return{clear:t,get:e,getLast:r,set:n}}),r("lib/mscgenjs-core/render/graphics/markermanager",["../../lib/lodash/lodash.custom","../text/arcmappings"],function(t,e){"use strict";function r(t,e,r){return e&&r&&["<->","->"].indexOf(t>-1)?r>e?"signal":"signal-u":""}function n(t,e,r){return"<->"===t&&r>=e?"signal-l":"signal-lu"}function i(t,e,i,o,a){var c=[];return u[e]&&u[e].attributes&&(c=u[e].attributes.map(function(c){return{name:c.name,value:c.value.replace(/\{\{signal-marker-end\}\}/g,r(e,o,a)).replace(/\{\{signal-marker-start\}\}/g,n(e,o,a)).replace(/\{\{id\}\}/g,t).replace(/\{\{color\}\}/g,i||"black")}})),c}function o(t,r){return u[e.getNormalizedKind(t)].marker.name+(Boolean(r)?" "+r:" black")}function a(t,r){function n(e){a(t,e)}return Array.isArray(r)&&r.forEach(n),r.arcs&&r.arcs.forEach(n),r.kind&&u[e.getNormalizedKind(r.kind)]&&u[e.getNormalizedKind(r.kind)].marker&&t.indexOf(o(r.kind,r.linecolor))<0&&t.push(o(r.kind,r.linecolor)),t}function c(t){return{kind:t.split(" ")[0],color:t.split(" ")[1]}}function s(t){return t.arcs.reduce(a,[]).sort().map(c)}var u={"->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"}],marker:{name:"signal"}},"<->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"},{name:"marker-start",value:"url(#{{id}}{{signal-marker-start}}-{{color}})"}],marker:{name:"signal"}},"=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},">>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},"..":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"--":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"==":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"::":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},":>":{attributes:[{name:"style",value:"stroke:{{color}};"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",
end:""}},"<:>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},"-x":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}lost-{{color}})"}],marker:{name:"lost",end:""}}},l={signal:{variants:[{name:"",path:"M9,3 l-8, 2"},{name:"-u",path:"M9,3 l-8,-2"},{name:"-l",path:"M9,3 l 8, 2"},{name:"-lu",path:"M9,3 l 8,-2"}]},method:{variants:[{name:"",path:"1,1  9,3  1,5"},{name:"-l",path:"17,1 9,3 17,5"}]},callback:{variants:[{name:"",path:"M 1,1 l 8,2 l-8,2"},{name:"-l",path:"M17,1 l-8,2 l 8,2"}]},lost:{variants:[{name:"",path:"M7,0 l5,6 M7,6 l5,-6"}]}};return{getAttributes:i,getMarkerDefs:function(e,r){return t.flatten(s(r).map(function(t){return l[t.kind].variants.map(function(r){return{name:e+t.kind+r.name+"-"+t.color,path:r.path,color:t.color,type:t.kind}})}))}}}),r("lib/mscgenjs-core/render/graphics/renderlabels",["./svgelementfactory","./svgutensils","./constants","../text/textutensils","../text/arcmappings"],function(t,e,r,n,i){"use strict";function o(t,e){e&&t.setAttribute("style","fill:"+e+";")}function a(t,e,r){o(t,e&&!r?"blue":r)}function c(r,n){var i=t.createRect(e.getBBox(r),"label-text-background");return n&&i.setAttribute("style","fill:"+n+"; stroke:"+n+";"),i}function s(e,r,n,i,o,a){var c={};return c=0===e?t.createText(r,{x:n,y:i},o,a.url,a.id,a.idurl):t.createText(r,{x:n,y:i},o,a.url)}function u(t,e,r){var n=e||t,o=i.getClass(n),a=i.getAggregateClass(n);return o===a?o+r:a+r+o+r}function l(t,n,i,c,l,d){var p=i+(l+.25)*e.calculateTextHeight(),f="";f=u(c.kind,d&&d.kind,"-text "),d&&(d.alignLeft&&(f+="anchor-start "),d.alignAround&&(p=i+(l+.25)*(e.calculateTextHeight()+r.LINE_WIDTH)));var h=s(l,t,n,p,f,c);return o(h,c.textcolor),a(h,c.url,c.textcolor),h}function d(n,i,o,a){var s=t.createGroup(a);if(n.label){var u=i.x+i.width/2,d=f(n.label,n.kind,i.width,r.FONT_SIZE,o?o.wordWrapArcs:!1),p={};o&&o.alignAbove&&d.forEach(function(){d.push("")});var h=i.y-(d.length-1)/2*(e.calculateTextHeight()+1);o&&o.alignAround&&(1===d.length&&d.push(""),h=i.y-(d.length-1)/2*(e.calculateTextHeight()+r.LINE_WIDTH+1)),d.forEach(function(t,e){""!==t&&(p=l(t,u,h,n,e,o),o&&o.ownBackground&&s.appendChild(c(p,n.textbgcolor)),s.appendChild(p)),h++})}return s}function p(t,e){var r=Math.abs(t),n=12;return 160>=r?r/(e/n*8):320>=r?r/(e/n*6.4):480>=r?r/(e/n*5.9):r/(e/n*5.6)}function f(t,e,r,o,a){return"box"===i.getAggregate(e)||"undefined"==typeof e||a?n.wrap(t,p(r,o)):t.split("\\n")}return{createLabel:d,splitLabel:f}}),r("lib/mscgenjs-core/render/graphics/entities",["./renderlabels","./constants"],function(t,e){"use strict";function r(t){return c[t]}var n=160,i=100,o=34,a={interEntitySpacing:n,height:o,width:i},c={};return{init:function(t){a.interEntitySpacing=n,a.height=o,a.width=i,t&&(a.interEntitySpacing=t*n,a.width=t*i),c={}},getX:r,setX:function(t,e){c[t.name]=e+a.width/2},getOAndD:function(t,e){return{from:r(r(t)<r(e)?t:e),to:r(r(e)>r(t)?e:t)}},setHeight:function(t){a.height=t},getDims:function(){return a},getNoEntityLines:function(r){return t.splitLabel(r,"box",a.width,e.FONT_SIZE).length}}}),r("lib/mscgenjs-core/render/graphics/renderast",["./svgelementfactory","./svglowlevelfactory","./svgutensils","./renderutensils","./renderskeleton","../text/flatten","../text/arcmappings","./rowmemory","./idmanager","./markermanager","./entities","./renderlabels","./constants","../../lib/lodash/lodash.custom"],function(t,e,r,n,i,o,a,c,s,u,l,d,p,f){"use strict";function h(t,e,n,i){var a=o.flatten(t),c=i||{};c=f.defaults(c,{source:null,styleAdditions:null,mirrorEntitiesOnBottom:!1}),g(a,e,n,c),b(a),m(a);var s=e.document.getElementById(n);return s?r.webkitNamespaceBugWorkaround(s.innerHTML):r.webkitNamespaceBugWorkaround(e.document.body.innerHTML)}function g(t,e,n,o){s.setPrefix(n),K.document=i.bootstrap(e,n,s.get(),u.getMarkerDefs(s.get(),t),o),K.mirrorEntitiesOnBottom=Boolean(o.mirrorEntitiesOnBottom),r.init(K.document),y(K,t.depth),w(K,t.options)}function b(t){j(t.entities),c.clear(l.getDims().height,K.arcRowHeight),D(t.arcs,t.entities),K.mirrorEntitiesOnBottom&&I()}function m(t){var e=C(t);_(K,e),A(t.options,e),E(e)}function y(t,e){v(t.layer,t.document),t.maxDepth=e?e:0}function v(t,e){t.defs=e.getElementById(s.get("__defs")),t.lifeline=e.getElementById(s.get("__lifelinelayer")),t.sequence=e.getElementById(s.get("__sequencelayer")),t.notes=e.getElementById(s.get("__notelayer")),t.inline=e.getElementById(s.get("__arcspanlayer")),t.watermark=e.getElementById(s.get("__watermark"))}function x(t,e){t.arcRowHeight=V,t.arcGradient=$,t.wordWrapArcs=!1,e&&(e.arcgradient&&(t.arcRowHeight=parseInt(e.arcgradient,10)+V,t.arcGradient=parseInt(e.arcgradient,10)+$),t.wordWrapArcs=Boolean(e.wordwraparcs))}function w(t,e){l.init(e&&e.hscale),x(t,e)}function C(t){var e=n.determineDepthCorrection(t.depth,p.LINE_WIDTH),r=c.getLast(),i={width:t.entities.length*l.getDims().interEntitySpacing+e,height:Boolean(K.mirrorEntitiesOnBottom)?2*l.getDims().height+r.y+r.height+2*P:r.y+r.height/2+2*P,horizontaltransform:(l.getDims().interEntitySpacing+e-l.getDims().width)/2,autoscale:!!t.options&&!!t.options.width&&"auto"===t.options.width,verticaltransform:P,scale:1};return i.x=0-i.horizontaltransform,i.y=0-i.verticaltransform,i}function _(e,r){var n=t.createRect(r,"bglayer");e.document.getElementById(s.get("__background")).appendChild(n)}function k(e,r){K.layer.watermark.appendChild(t.createDiagonalText(e,r,"watermark"))}function A(t,e){t&&(t.watermark&&k(t.watermark,e),t.width&&"auto"!==t.width&&n.scaleCanvasToWidth(t.width,e))}function E(t){var r=K.document.getElementById(s.get()),n=K.document.getElementById(s.get("__body"));n.setAttribute("transform","translate("+t.horizontaltransform+","+t.verticaltransform+") scale("+t.scale+","+t.scale+")"),t.autoscale&&t.autoscale===!0?e.setAttributes(r,{width:"100%",height:"100%",viewBox:"0 0 "+t.width.toString()+" "+t.height.toString()}):e.setAttributes(r,{width:t.width.toString(),height:t.height.toString()})}function L(t){var e=t[0],n=2;return t.forEach(function(t){var r=l.getNoEntityLines(t.label);r>n&&(n=r,e=t)}),n>2?Math.max(l.getDims().height,r.getBBox(S(e)).height):l.getDims().height}function S(e,r){var n=t.createGroup(s.get(e.name)),i=l.getDims();return i.x=r?r:0,n.appendChild(t.createRect(i,"entity",e.linecolor,e.textbgcolor)),n.appendChild(d.createLabel(e,{x:i.x,y:i.height/2,width:i.width},{kind:"entity"})),n}function I(){var e=c.getLast().y+(c.getLast().height+K.arcRowHeight)/2;K.layer.lifeline.appendChild(t.createUse({x:0,y:e},s.get("arcrow"))),K.layer.sequence.appendChild(t.createUse({x:0,y:e+K.arcRowHeight/2},s.get("entities")))}function j(e){var r=0,n=t.createGroup(s.get("entities"));e&&(l.setHeight(L(e)+2*p.LINE_WIDTH),e.forEach(function(t){n.appendChild(S(t,r)),l.setX(t,r),r+=l.getDims().interEntitySpacing}),K.layer.defs.appendChild(n),K.layer.sequence.appendChild(t.createUse({x:0,y:0},s.get("entities")))),K.arcEndX=r-l.getDims().interEntitySpacing+l.getDims().width}function T(e,n,i){var o=!1,u=[];c.set(n),e.forEach(function(t,e){var f=s.get(n.toString()+"_"+e.toString()),h={};switch(a.getAggregate(t.kind)){case"emptyarc":h=W(t,f),o="..."===t.kind,u.push({id:f,layer:K.layer.sequence});break;case"box":h=X(f,l.getOAndD(t.from,t.to),t),u.push({id:f,layer:K.layer.notes});break;case"inline_expression":h=N(f+"_label",t),u.push({id:f+"_label",layer:K.layer.notes}),Z.push({id:f,arc:t,rownum:n});break;default:if(t.from&&t.to){var g=0,b=0;if("*"===t.to){var m=t.label;b=l.getX(t.from),i.forEach(function(e,r){e.name!==t.from&&(g=l.getX(e.name),t.label="",K.layer.defs.appendChild(G(f+"bc"+r,t,b,g)),u.push({id:f+"bc"+r,layer:K.layer.sequence}))}),t.label=m,h=d.createLabel(t,{x:0,y:0,width:K.arcEndX},{alignAround:!0,ownBackground:!0,wordWrapArcs:K.wordWrapArcs},f+"_lbl"),u.push({id:f+"_lbl",layer:K.layer.sequence})}else h=G(f,t,l.getX(t.from),l.getX(t.to)),u.push({id:f,layer:K.layer.sequence})}}h&&(c.set(n,Math.max(c.get(n).height,r.getBBox(h).height+2*p.LINE_WIDTH)),K.layer.defs.appendChild(h))});var f="arcrow_"+n.toString(),h="arcrow";o&&(h="arcrowomit"),K.layer.defs.appendChild(H(i,h,c.get(n).height,s.get(f))),K.layer.lifeline.appendChild(t.createUse({x:0,y:c.get(n).y},s.get(f))),u.forEach(function(e){e.layer.appendChild(t.createUse({x:0,y:c.get(n).y},e.id))})}function D(e,r){if(Z=[],K.layer.defs.appendChild(H(r,s.get("arcrow"))),K.layer.lifeline.appendChild(t.createUse({x:0,y:c.get(-1).y},s.get("arcrow"))),e){for(var n=0;n<e.length;n++)T(e[n],n,r);B(Z)}}function N(e,n){var i=l.getOAndD(n.from,n.to),o=7,a=2*K.maxDepth*p.LINE_WIDTH,c=i.to-i.from+(l.getDims().interEntitySpacing-2*p.LINE_WIDTH)-o-p.LINE_WIDTH,s=i.from-(l.getDims().interEntitySpacing-3*p.LINE_WIDTH-a)/2-2*(K.maxDepth-n.depth)*p.LINE_WIDTH,u=t.createGroup(e);n.label=n.kind+(n.label?": "+n.label:"");var f=d.createLabel(n,{x:s+p.LINE_WIDTH-c/2,y:K.arcRowHeight/4,width:c},{alignLeft:!0,ownBackground:!1,wordWrapArcs:K.wordWrapArcs}),h=r.getBBox(f),g=Math.max(h.height+2*p.LINE_WIDTH,K.arcRowHeight/2-2*p.LINE_WIDTH),b=Math.min(h.width+2*p.LINE_WIDTH,c),m=t.createEdgeRemark({width:b-p.LINE_WIDTH+o,height:g,x:s,y:0},"box inline_expression_label",n.linecolor,n.textbgcolor,o);return u.appendChild(m),u.appendChild(f),u}function B(e){e.forEach(function(e){K.layer.defs.appendChild(O(e)),K.layer.inline.appendChild(t.createUse({x:0,y:c.get(e.rownum).y},e.id))})}function O(t){var e=c.get(t.rownum).y,r=c.get(t.rownum+t.arc.numberofrows+1).y,n=r-e;return t.arc.label="",U(t.id,l.getOAndD(t.arc.from,t.arc.to),t.arc,n)}function H(e,r,n,i){i||(i=r),(!n||n<K.arcRowHeight)&&(n=K.arcRowHeight);var o=t.createGroup(i);return e.forEach(function(e){var i=t.createLine({xFrom:l.getX(e.name),yFrom:0-n/2,xTo:l.getX(e.name),yTo:n/2},r);e.linecolor&&i.setAttribute("style","stroke:"+e.linecolor+";"),o.appendChild(i)}),o}function R(e,r,n,i,o){var c=2*(K.arcRowHeight/5),d=l.getDims().interEntitySpacing/2,f={},h="arc "+a.getAggregateClass(e)+" "+a.getClass(e);if(i){f=t.createGroup();var g=t.createUTurn({x:r,y:c/2},n+c-2*p.LINE_WIDTH,d-2*p.LINE_WIDTH,h,"::"!==e),b=t.createUTurn({x:r,y:c/2},n+c-p.LINE_WIDTH,d),m=t.createUTurn({x:r,y:c/2},n+c,d,h,"::"!==e);Boolean(o)&&g.setAttribute("style","stroke:"+o),u.getAttributes(s.get(),e,o,r,r).forEach(function(t){b.setAttribute(t.name,t.value)}),b.setAttribute("style","stroke:transparent;"),Boolean(o)&&m.setAttribute("style","stroke:"+o),f.appendChild(g),f.appendChild(m),f.appendChild(b),f.setAttribute("class",h)}else f=t.createUTurn({x:r,y:c/2},n+c,d,h,"-x"===e),u.getAttributes(s.get(),e,o,r,r).forEach(function(t){f.setAttribute(t.name,t.value)});return f}function W(t,e){return"---"===t.kind?z(e,t,l.getOAndD(t.from,t.to)):q(e,t,l.getOAndD(t.from,t.to))}function F(t){return t.arcskip?t.arcskip*K.arcRowHeight:0}function M(t){return"<:>"===t?"bidi ":"::"===t?"nodi ":""}function G(e,r,i,o){var c=t.createGroup(e),f="arc ";f+=M(r.kind),f+=a.getAggregateClass(r.kind)+" "+a.getClass(r.kind);var h=[":>","::","<:>"].indexOf(r.kind)>-1,g=F(r),b=0===g?K.arcGradient:g;if(o=n.determineArcXTo(r.kind,i,o),i===o){c.appendChild(R(r.kind,i,g,h,r.linecolor));var m=2*l.getDims().interEntitySpacing/3;c.appendChild(d.createLabel(r,{x:i+1.5*p.LINE_WIDTH-m/2,y:0-K.arcRowHeight/5-p.LINE_WIDTH/2,width:m},{alignLeft:!0,alignAbove:!0,ownBackground:!0,wordWrapArcs:K.wordWrapArcs}))}else{var y=t.createLine({xFrom:i,yFrom:0,xTo:o,yTo:b},f,h);u.getAttributes(s.get(),r.kind,r.linecolor,i,o).forEach(function(t){y.setAttribute(t.name,t.value)}),c.appendChild(y),c.appendChild(d.createLabel(r,{x:i,y:0,width:o-i},{alignAround:!0,ownBackground:!0,wordWrapArcs:K.wordWrapArcs}))}return c}function q(e,r,n){var i=0,o=K.arcEndX,a=t.createGroup(e);return r.from&&r.to&&(i=n.from,o=n.to-n.from),a.appendChild(d.createLabel(r,{x:i,y:0,width:o},{ownBackground:!0,wordWrapArcs:K.wordWrapArcs},e+"_lbl")),a}function z(e,r,n){var i=0,o=K.arcEndX,a="comment",c=t.createGroup(e);if(r.from&&r.to){var s=1*K.maxDepth*p.LINE_WIDTH,u=2*(K.maxDepth-r.depth)*p.LINE_WIDTH;i=n.from-(l.getDims().interEntitySpacing+2*p.LINE_WIDTH)/2-(u-s),o=n.to+(l.getDims().interEntitySpacing+2*p.LINE_WIDTH)/2+(u-s),a="inline_expression_divider"}var d=t.createLine({xFrom:i,yFrom:0,xTo:o,yTo:0},a);return c.appendChild(d),c.appendChild(q(e+"_txt",r,n)),r.linecolor&&d.setAttribute("style","stroke:"+r.linecolor+";"),c}function U(e,r,n,i){var o=2*K.maxDepth*p.LINE_WIDTH,a=r.to-r.from+l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o,c=r.from-(l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o)/2,s=t.createGroup(e),u=2*(K.maxDepth-n.depth)*p.LINE_WIDTH;return s.appendChild(t.createRect({width:a+2*u,height:i?i:K.arcRowHeight-2*p.LINE_WIDTH,x:c-u,y:0},"box inline_expression "+n.kind,n.linecolor,n.textbgcolor)),s}function X(e,n,i){var o=2*K.maxDepth*p.LINE_WIDTH,a=n.to-n.from+l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o,c=n.from-(l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o)/2,s=t.createGroup(e),u={},f=d.createLabel(i,{x:c,y:0,width:a}),h=r.getBBox(f),g=Math.max(h.height+2*p.LINE_WIDTH,K.arcRowHeight-2*p.LINE_WIDTH),b={width:a,height:g,x:c,y:0-g/2};switch(i.kind){case"rbox":u=t.createRBox(b,"box rbox",i.linecolor,i.textbgcolor);break;case"abox":u=t.createABox(b,"box abox",i.linecolor,i.textbgcolor);break;case"note":u=t.createNote(b,"box note",i.linecolor,i.textbgcolor);break;default:u=t.createRect(b,"box",i.linecolor,i.textbgcolor)}return s.appendChild(u),s.appendChild(f),s}var P=3,V=38,$=0,K=Object.seal({arcRowHeight:V,arcGradient:$,arcEndX:0,wordWrapArcs:!1,mirrorEntitiesOnBottom:!1,maxDepth:0,document:{},layer:{defs:{},lifeline:{},sequence:{},notes:{},inline:{},watermark:{}}}),Z=[];return{clean:function(t,e){K.document=i.init(e),r.init(K.document),r.removeRenderedSVGFromElement(t)},renderAST:function(t,e,r,n,i){return h(t,n,r,{source:e,styleAdditions:i})},renderASTNew:h}}),r("utl/exporter",[],function(){"use strict";function t(t,e,r){return t.pathname+"?lang="+r+"&msc="+encodeURIComponent(e)}function e(e,n,i){return t(e,n,i).length<r}var r=4094;return{toLocationString:function(r,n,i){var o="# source too long for an URL";return e(r,n,i)&&(o=n),t(r,o,i)}}}),r("embedding/config",[],function(){"use strict";function t(t,e){Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]})}var e={defaultLanguage:"mscgen",parentElementPrefix:"mscgen_js-parent_",clickable:!1,clickURL:"https://sverweij.github.io/mscgen_js/",loadFromSrcAttribute:!1};return{getConfig:function(){return"undefined"!=typeof mscgen_js_config&&mscgen_js_config&&"object"==typeof mscgen_js_config&&t(e,mscgen_js_config),e}}}),r("utl/tpl",[],function(){"use strict";return{applyTemplate:function(t,e){var r=t;return e&&Object.keys(e).forEach(function(t){r=r.replace(new RegExp("{"+t+"}","g"),e[t])}),r}}}),r("embedding/error-rendering",["../utl/tpl"],function(t){"use strict";function e(t,e){for(var r=t.toString(),n=e-r.length,i=0;n>i;i++)r=" "+r;return r}function r(t,r){return e(r,3)+" "+t}function n(e,r){return e.split("").reduce(function(e,n,o){return o===r?e+t.applyTemplate(s,{"char":i(n)}):e+i(n)},"")}function i(t){return t.replace(/</g,"&lt;")}var o="<pre><div style='color: red'># ERROR on line {line}, column {col} - {message}</div>",a="<pre><div style='color: red'># ERROR {message}</div>",c="<mark>{line}\n</mark>",s="<span style='text-decoration:underline'>{char}</span>";return{formatNumber:e,deHTMLize:i,renderError:function(e,s,u){var l=Boolean(s)?t.applyTemplate(o,{message:u,line:s.start.line,col:s.start.column}):t.applyTemplate(a,{message:u});return e.split("\n").reduce(function(e,o,a){return s&&a===s.start.line-1?e+t.applyTemplate(c,{line:r(n(o,s.start.column-1),a+1)}):e+i(r(o,a+1))+"\n"},l)+"</pre>"}}}),r("utl/domutl",[],function(){"use strict";return{ajax:function(t,e,r){var n=new XMLHttpRequest;n.onreadystatechange=function(t){t.target.readyState===XMLHttpRequest.DONE&&(200===n.status?e(t):r(t))},n.open("GET",t),n.responseType="text";try{n.send()}catch(i){r(i)}}}}),e(["lib/mscgenjs-core/parse/xuparser","lib/mscgenjs-core/parse/msgennyparser","lib/mscgenjs-core/render/graphics/renderast","utl/exporter","embedding/config","embedding/error-rendering","utl/domutl","utl/tpl"],function(t,e,r,n,i,o,a,c){"use strict";function s(){u();var t=document.getElementsByClassName("mscgen_js");l(t,0),l(document.getElementsByTagName("mscgen"),t.length)}function u(){for(var t=document.scripts,e=0;e<t.length;e++)E[t[e].type]&&!t[e].hasAttribute("data-renderedby")&&(t[e].insertAdjacentHTML("afterend",c.applyTemplate(C,{src:t[e].src?c.applyTemplate(_,{src:t[e].src}):"",lang:E[t[e].type]||i.getConfig().defaultLanguage,msc:t[e].textContent.replace(/</g,"&lt;"),mirrorEntities:y(t[e])?"data-mirror-entities='true'":"",namedStyle:v(t[e])})),t[e].setAttribute("data-renderedby","mscgen_js"))}function l(t,e){for(var r=0;r<t.length;r++)d(t[r],e+r)}function d(t,e){t.hasAttribute("data-renderedby")||f(t,e)}function p(t,e){t.innerHTML=c.applyTemplate("<div style='color: red'>{string}</div>",{string:e})}function f(t,e){b(t,e),t.setAttribute("data-renderedby","mscgen_js"),i.getConfig().loadFromSrcAttribute&&t.getAttribute("data-src")?a.ajax(t.getAttribute("data-src"),function(e){h(t,e.target.response)},function(){p(t,c.applyTemplate(k,{url:t.getAttribute("data-src")}))}):!i.getConfig().loadFromSrcAttribute&&t.getAttribute("data-src")?p(t,c.applyTemplate(A,{url:t.getAttribute("data-src")})):h(t,t.textContent)}function h(t,e){var r=m(t),n=x(e,r);n.entities?w(n,t.id,e,r,y(t),v(t)):t.innerHTML=o.renderError(e,n.location,n.message)}function g(t,e,r){var o={pathname:"index.html"},a=document.createElement("a");return a.setAttribute("href",i.getConfig().clickURL+n.toLocationString(o,t,e)),a.setAttribute("id",r+"link"),a.setAttribute("style","text-decoration: none;"),a.setAttribute("title","click to edit in the mscgen_js interpreter"),a}function b(t,e){t.id||(t.id=i.getConfig().parentElementPrefix+e.toString())}function m(t){var e=t.getAttribute("data-language");return e||(e=i.getConfig().defaultLanguage),e}function y(t){var e=t.getAttribute("data-mirror-entities");return e&&"true"===e?!0:!1}function v(t){return t.getAttribute("data-named-style")}function x(r,n){var i={};try{i="msgenny"===n?e.parse(r):"json"===n?JSON.parse(r):t.parse(r)}catch(o){return o}return i}function w(t,e,n,o,a,c){var s=document.getElementById(e);s.innerHTML="",!0===i.getConfig().clickable&&(s.appendChild(g(n,o,e)),e+="link"),r.clean(e,window),r.renderASTNew(t,window,e,{source:n,additionalTemplate:c,mirrorEntitiesOnBottom:a})}var C="<span class='mscgen_js' {src} data-language='{lang}' data-named-style='{namedStyle}' {mirrorEntities}>{msc}<span>",_="data-src='{src}' ",k="ERROR: Could not find or open the URL '{url}' specified in the <code>data-src</code> attribute.",A="ERROR: Won't load the chart specified in <code>data-src='{url}'</code>, because loading from separate files is switched off in the mscgen_js configuration. <br><br>See <a href='https://sverweij.github.io/mscgen_js/embed.html#loading-from-separate-files'>Loading charts from separate files</a> in the mscgen_js embedding guide how to enable it.",E={"text/x-mscgen":"mscgen","text/x-msgenny":"msgenny","text/x-xu":"xu"};s()}),r("mscgen-inpage",function(){})}();