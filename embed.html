<!DOCTYPE html>
<html>
    <head>
        <!--
        This file is part of mscgen_js.

        mscgen_js is free software: you can redistribute it and/or modify
        it under the terms of the GNU General Public License as published by
        the Free Software Foundation, either version 3 of the License, or
        (at your option) any later version.

        mscgen_js is distributed in the hope that it will be useful,
        but WITHOUT ANY WARRANTY; without even the implied warranty of
        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
        GNU General Public License for more details.

        You should have received a copy of the GNU General Public License
        along with mscgen_js.  If not, see <http://www.gnu.org/licenses/>.
        
         mscgen_js
            version: 0.9.33
            build-date: 20140826 21:56
            commit: c389d0b408818809
        -->
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="message sequence chart renderer">
        <meta name="keywords" content="mscgen, msc, sequence diagram, sequence chart, online sequence diagram, online sequence chart, mscgen.js, mscgen_js">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script type="application/ld+json">
		{
		  "@context" : "http://schema.org",
		  "@type" : "Article",
		  "name" : "Embedding mscgen in html",
		  "author" : {
		    "@type" : "Person",
		    "name" : "Sander Verweij"
		  }
		}
		</script>
        <link rel="icon" sizes="16x16 32x32 64x64" href="../favicon.ico">
        <link rel="icon" sizes="228x228" href="./favicon-228.png">
        <link rel="icon" sizes="195x195" href="./favicon-195.png">
        <link rel="icon" sizes="152x152" href="./favicon-152.png">
        <link rel="icon" sizes="144x144" href="./favicon-144.png">
        <link rel="icon" sizes="128x128" href="./favicon-128.png">
        
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="./iosfavicon-152.png">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./iosfavicon-144.png">
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="./iosfavicon-120.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./iosfavicon-114.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./iosfavicon-72.png">
        <link rel="apple-touch-icon-precomposed" href="./iosfavicon-57.png">
        <link rel="shortcut icon" href="./favicon.ico">

        <title>mscgen_js - embedding</title>
        <link rel="stylesheet" href="./style/doc.css?c389d0b408818809" type="text/css" media="screen, print"> 
        <script src="mscgen-inpage.js?c389d0b408818809" defer></script>
        <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] ||
            function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o), m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
        ga ('create', 'UA-42701906-1', 'sverweij.github.io');
        ga ('send', 'pageview');
        </script>
    </head>
    <body itemscope itemtype="http://schema.org/Article">
<header>
    <nav class="hideonprint">
        <a href="https://twitter.com/SanderSpeaks"
        data-dnt="true"
        class="twitter icon hideonmobile fadable"
        title="Your praise goes here"
        target="_blank"><br><br>praise</a>
        <a href="https://github.com/sverweij/mscgen_js"
        class="github icon hideonmobile fadable"
        title="fork me on github"
        target="_blank"><br><br>fork</a>
        <a href="./index.html"
        class="interpreter icon fadable"
        title="Go to the interpreter"><br><br>interpret</a>     
        <a href="tutorial.html"
        class="question icon fadable"
        title="Open the tutorial"><br><br>learn</a>
    </nav>
    <div class="debug fadable">
        <div><em>version:</em> 0.9.33</div>
        <div><em>build-date:</em> 20140826 21:56</div>
        <div><em>commit:</em> c389d0b408818809</div>
    </div>
    <a href="./index.html">
    <h1>mscgen_js <em>embedding</em></h1>
    <span class="hideonmobile">turns text into sequence charts</span>
    </a>
</header>
        <article>
        <h1 itemprop="name">Embedding MscGen in your html is easy:</h1>
        <p>
            <ol>
                <li>
                    Reference the mscgen-inpage script in your page head:
                    <pre class="code">&lt;script src="https://sverweij.github.io/mscgen_js/mscgen-inpage.js" defer>
&lt;/script>
</pre>
                </li>
                <li>
                    Put your mscgen script in the page, with
                    a tag around it that has <code>mscgen_js</code> as one of its
                    <code>class</code> attributes.<br>
<pre class="code">
<mark>&lt;pre class="mscgen_js"&gt;</mark>
msc {
    a [label="consumer"], b [label="shopfront"], c;
    
    a =>> b [label="buy (commestible)"];
    b =>> c [label="lookup_price(commestible)"];
    c >> b [label="price"];
    b =>> a [label=""];
    a =>> b [label="money"];
    ...;
}
<mark>&lt;/pre></mark>
</pre>             
                    <br>The element type does not matter to mscgen_js (although it might matter to you ...)        
                </li>
            </ol>
        </p>
        
        <p>
        The script replaces all elements in the page with the class <code>mscgen_js</code> by 
        a rendered sequence chart. For the above mscgen this looks like so: 
        </p>
        <pre class="mscgen_js">
        msc {
            a [label="consumer"], b [label="shopfront"], c;

            a =>> b [label="buy (commestible)"];
            b =>> c [label="lookup_price(commestible)"];
            c >> b [label="price"];
            b =>> a [label=""];
            a =>> b [label="money"];
            ...;
        }</pre>

        <h2>Embedding MscGen in Atlassian Confluence:</h2>
        <p>If your Confluence admin has enabled the confluence HTML macro, getting
            mscgen in your page is as simple as adding a HTML "macro" to the page 
            and put the <code>script</code> tag in there. Sample snippet:
        </p>
<pre class="code">
&lt;script src="https://sverweij.github.io/mscgen_js/mscgen-inpage.js" defer></script>
              
&lt;code class="mscgen_js">
msc {
    a [label="Entity A"], b [label="Entity B"];
    
    a <<=>> b [label="testing (confluence)"];
    b note b [label="mscgen embedded in a confluence page!"];
}
&lt;/code>
</pre>
        <h2>Error handling</h2>
        <p>If your mscgen code contains an error, instead of a sequence chart, you will see
             your mscgen code with the offending line highlighted, thusly:</p>
        <pre class="code mscgen_js">msc {
  a, b; 
  a -> b[nonexistingattribute="something"];
  b >> a[label="done dee done"];
}</pre>

        <h2>Supported browsers</h2>
        <p>
            The in page script has been verified to work in all
            desktop and mobile versions of Firefox, Safari, Chrome
            and Opera released since 2013. Internet explorer is
            verified to work from version 10.
        </p>

        <h2>Other sequence chart languages</h2>
        <p>
            Mscgen_js assumes the language of the presented
            script to be <em>mscgen</em>. If you use one of the other languages
            supported by mscgen_js, add a <code>data-language</code>
            attribute to the element with the target language:
            <code>&lt;code class="mscgen_js"<mark> data-language="msgenny"</mark>></code>.
        </p>
        <p>
            Three examples for <code>msgenny</code>, <code>xù</code> and the 
            abstract syntax tree the syntax tree as produced by the parsers
            (<code>json</code>):
        </p>
        <pre class="code">
&lt;pre id="yourownidsgetpreserved" class="mscgen_js" <mark>data-language="msgenny"</mark>>
    arcgradient=10, watermark="msgenny"; 
    
    Harry =>> Sally: "marry(Sally, Harry)?";
    Sally >> Harry: YES, Sally -> mother: he's asked me to marry him!; 
    mother -> *: "Stop that. Silly Sally.";
&lt/pre></pre>
        <pre id="yourownidsgetpreserved" 
             class="mscgen_js" 
             data-language="msgenny">
            arcgradient=10, watermark="msgenny"; 
            
            Harry =>> Sally: "marry(Sally, Harry)?";
            Sally >> Harry: YES, 
            Sally -> mother: he's asked me to marry him!; 
            mother -> *: "Stop that. Silly Sally.";
        </pre>
            <pre class="code">
&lt;pre class="mscgen_js" <mark>data-language="xu"</mark>>
msc{
    watermark="xù: 序列圖", wordwraparcs="true";
    a,b,d,e;
    a => d;
    b loop e [label="for each element with class='mscgen_js'"]{
        b =>> d [label="get textContent of the element"];
        d >> b  [label="textContent"];
        b =>> e [label="parse(textContent)"];
        b alt e [label="happy day", textbgcolor="#f7fff7"] {
            e >> b [label="abstract syntax tree"];
            b -> d [label="clear inner HTML of the element"];
            b -> d [label="render (abstract syntax tree)"];
            --- [label="error", linecolor="red"];
            e >> b [label="error object", linecolor="red"];
            b -> d [label="add error message to innerHTML of the element", 
                    linecolor="red"];
        };
    };
    ...;
}
&lt;/pre></pre>
        <pre class="mscgen_js" data-language="xu">
msc{
    watermark="xù: 序列圖", wordwraparcs="true";
    a,b,d,e;
    a => d;
    b loop e [label="for each element with class='mscgen_js'"]{
        b =>> d [label="get textContent of the element"];
        d >> b  [label="textContent"];
        b =>> e [label="parse(textContent)"];
        b alt e [label="happy day", textbgcolor="#f7fff7"] {
            e >> b [label="abstract syntax tree"];
            b -> d [label="clear inner HTML of the element"];
            b -> d [label="render (abstract syntax tree)"];
            --- [label="error", linecolor="red"];
            e >> b [label="error object", linecolor="red"];
            b -> d [label="add error message to innerHTML of the element", 
                    linecolor="red"];
        };
    };
    ...;
}
        </pre>
<pre class="code">&lt;pre class="mscgen_js" <mark>data-language="json"</mark>>
{
    "options":{
    "watermark" : "JSON/ AST"
    },
    "entities": [
    {
    "name": "Alice",
    "linecolor": "#008800",
    "textbgcolor": "#CCFFCC",
    "textcolor": "black",
    "arctextcolor": "#008800",
    "arclinecolor": "#008800"
    },
    {
    "name": "Bob",
    "linecolor": "#FF0000",
    "textbgcolor": "#FFCCCC",
    "textcolor": "black",
    "arctextcolor": "#FF0000",
    "arclinecolor": "#FF0000"
    },
    {
    "name": "pocket",
    "linecolor": "#0000FF",
    "textbgcolor": "#CCCCFF",
    "textcolor": "black",
    "arctextcolor": "#0000FF",
    "arclinecolor": "#0000FF"
    }
    ],
    "arcs":[[{
        "kind" : "=>",
        "from" : "Alice",
        "to" : "Bob",
        "label" : "do something funny"
    }], [{
        "kind" : "=>",
        "from" : "Bob",
        "to" : "pocket",
        "label" : "fetch (nose flute)"
    }], [{
        "kind" : ">>",
        "from" : "Bob",
        "to" : "Alice",
        "label" : "PHEEE!"
    }], [{
        "kind" : "=>",
        "from" : "Alice",
        "to" : "Alice",
        "label" : "hihihi"
    }]]
}
&lt;/pre></pre>
        <pre class="mscgen_js" data-language="json">
{
    "options":{
    "watermark" : "JSON/ AST"
    },
    "entities": [
    {
    "name": "Alice",
    "linecolor": "#008800",
    "textbgcolor": "#CCFFCC",
    "textcolor": "black",
    "arctextcolor": "#008800",
    "arclinecolor": "#008800"
    },
    {
    "name": "Bob",
    "linecolor": "#FF0000",
    "textbgcolor": "#FFCCCC",
    "textcolor": "black",
    "arctextcolor": "#FF0000",
    "arclinecolor": "#FF0000"
    },
    {
    "name": "pocket",
    "linecolor": "#0000FF",
    "textbgcolor": "#CCCCFF",
    "textcolor": "black",
    "arctextcolor": "#0000FF",
    "arclinecolor": "#0000FF"
    }
    ],
    "arcs":[[{
        "kind" : "=>",
        "from" : "Alice",
        "to" : "Bob",
        "label" : "do something funny"
    }], [{
        "kind" : "=>",
        "from" : "Bob",
        "to" : "pocket",
        "label" : "fetch (nose flute)"
    }], [{
        "kind" : ">>",
        "from" : "Bob",
        "to" : "Alice",
        "label" : "PHEEE!"
    }], [{
        "kind" : "=>",
        "from" : "Alice",
        "to" : "Alice",
        "label" : "hihihi"
    }]]
}</pre>
        </article>
<footer>
    <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="images/l_by-sa_3_0_88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">mscgen_js documentation</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://sverweij.github.io/mscgen_js" property="cc:attributionName" rel="cc:attributionURL" itemprop="author">Sander Verweij</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
</footer>
    </body>
</html>
